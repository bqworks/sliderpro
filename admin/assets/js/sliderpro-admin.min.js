!function(t){var e={slides:[],slideCounter:0,postsData:{},allowSlideImageResize:!0,init:function(){"single"===sp_js_vars.page?this.initSingleSliderPage():"all"===sp_js_vars.page&&this.initAllSlidersPage()},initSingleSliderPage:function(){var e=this;this.initSlides(),-1!==parseInt(sp_js_vars.id,10)&&this.loadSliderData(function(){e.checkSlideImageSize(),t(".slides-container").attr("data-loaded","true")}),t("form").on("submit",function(t){t.preventDefault(),e.saveSlider(),e.checkSlideImageSize()}),t(".preview-slider").on("click",function(t){t.preventDefault(),e.previewSlider()}),t(".update-presets").on("click",function(i){i.preventDefault(),e.updatePresets(t(this))}),t(".slider-setting-presets").on("change",function(i){i.preventDefault(),e.updateSettings(t(this).val())}),t('.add-slide, .slide-type a[data-type="empty"]').on("click",function(t){t.preventDefault(),e.addEmptySlide()}),t('.slide-type a[data-type="image"]').on("click",function(t){t.preventDefault(),e.addImageSlides()}),t('.slide-type a[data-type="posts"]').on("click",function(t){t.preventDefault(),e.addPostsSlides()}),t('.slide-type a[data-type="gallery"]').on("click",function(t){t.preventDefault(),e.addGallerySlides()}),t('.slide-type a[data-type="flickr"]').on("click",function(t){t.preventDefault(),e.addFlickrSlides()}),t(".add-breakpoint").on("click",function(t){t.preventDefault(),e.addBreakpoint()}),t(".breakpoints").on("click",".breakpoint-setting-name a",function(i){i.preventDefault();var a=t(this).attr("data-type"),n=t(this).parents(".breakpoint").find(".breakpoint-settings");e.addBreakpointSetting(a,n)}),t(".breakpoints").on("click",".remove-breakpoint",function(e){t(this).parents(".breakpoint").remove()}),t(".breakpoints").on("click",".remove-breakpoint-setting",function(e){t(this).parents("tr").remove()}),t(".breakpoints").lightSortable({children:".breakpoint",placeholder:""}),t(".postbox .hndle, .postbox .handlediv").on("click",function(){var e=t(this).parent(".postbox");!0===e.hasClass("closed")?e.removeClass("closed"):e.addClass("closed")}),t(".sidebar-settings").on("mouseover","label",function(){e.showInfo(t(this))}),t(".image-size-warning-close").click(function(e){e.preventDefault(),t(".image-size-warning").remove(),t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_close_image_size_warning"}})}),t(window).resize(function(){!0===e.allowSlideImageResize&&(e.resizeSlideImages(),e.allowSlideImageResize=!1,setTimeout(function(){e.resizeSlideImages(),e.allowSlideImageResize=!0},250))})},initAllSlidersPage:function(){var e=this;t(".getting-started-close").click(function(e){e.preventDefault(),t(".getting-started-info").hide(),t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_close_getting_started"}})}),t(".custom-css-js-warning-close").click(function(e){e.preventDefault();var i=t('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window delete-slider-dialog">\t\t<p class="dialog-question">'+sp_js_vars.remove_custom_css_js_warning+'</p>\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+sp_js_vars.yes+'</a>\t\t\t<a class="button dialog-cancel" href="#">'+sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body");i.find(".dialog-ok").one("click",function(e){e.preventDefault(),t(".custom-css-js-warning").hide(),t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_close_custom_css_js_warning"}}),i.remove()}),i.find(".dialog-cancel").one("click",function(t){t.preventDefault(),i.remove()}),i.find(".modal-overlay").one("click",function(t){i.remove()})}),t(".sliders-list").on("click",".preview-slider",function(i){i.preventDefault(),e.previewSliderAll(t(this))}),t(".sliders-list").on("click",".delete-slider",function(i){i.preventDefault(),e.deleteSlider(t(this))}),t(".sliders-list").on("click",".duplicate-slider",function(i){i.preventDefault(),e.duplicateSlider(t(this))}),t(".sliders-list").on("click",".export-slider",function(i){i.preventDefault(),e.exportSlider(t(this))}),t(".import-slider").on("click",function(e){var i=t.lightURLParse(t(this).attr("href")),n=void 0!==i.sp_page?parseInt(i.sp_page,10):1,s=void 0!==i.pages?parseInt(i.pages,10):1;e.preventDefault(),a.open(),a.setPaginationParams({currentPage:n,totalPages:s})}),t(".clear-all-cache").on("click",function(e){e.preventDefault(),t(".clear-cache-spinner").css({display:"inline-block",visibility:"visible"});var i=t(this).attr("data-nonce");t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_clear_all_cache",nonce:i},complete:function(e){t(".clear-cache-spinner").css({display:"",visibility:""})}})})},loadSliderData:function(e){var i=this;t(".slide-spinner").css({display:"inline-block",visibility:"visible"}),t.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_get_slider_data",id:sp_js_vars.id,nonce:sp_js_vars.lad_nonce},complete:function(a){var n=t.parseJSON(a.responseText);t.each(n.slides,function(e,a){var n={mainImage:{},thumbnail:{},caption:a.caption,layers:a.layers,html:a.html,settings:t.isArray(a.settings)?{}:a.settings};t.each(a,function(t,e){-1!==t.indexOf("main_image")?n.mainImage[t]=e:-1!==t.indexOf("thumbnail")&&(n.thumbnail[t]=e)}),i.getSlide(e).setData("all",n)}),t(".slide-spinner").css({display:"",visibility:""}),e()}})},saveSlider:function(){var e=this.getSliderData();e.nonce=sp_js_vars.sa_nonce,e.action="save";var i=JSON.stringify(e),a=t(".update-spinner").css({display:"inline-block",visibility:"visible"});t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_save_slider",data:i},complete:function(e){a.css({display:"",visibility:""}),-1===parseInt(sp_js_vars.id,10)&&!1===isNaN(e.responseText)?(t("h2").after('<div class="updated"><p>'+sp_js_vars.slider_create+"</p></div>"),window.location=sp_js_vars.admin+"?page=sliderpro&id="+e.responseText+"&action=edit"):0===t(".updated").length&&t("h2").after('<div class="updated"><p>'+sp_js_vars.slider_update+"</p></div>")}})},getSliderData:function(){var e=this,i={id:sp_js_vars.id,name:t("input#title").val(),settings:{},slides:[],panels_state:{}},a=[];return t(".slides-container").find(".slide").each(function(a){var n=t(this),s=e.getSlide(parseInt(n.attr("data-id"),10)).getData("all");s.position=parseInt(n.attr("data-position"),10),i.slides[a]=s}),t(".sidebar-settings").find(".setting").each(function(){var e=t(this);i.settings[e.attr("name")]="checkbox"===e.attr("type")?e.is(":checked"):e.val()}),t(".breakpoints").find(".breakpoint").each(function(){var e=t(this),i={breakpoint_width:e.find('input[name="breakpoint_width"]').val()};e.find(".breakpoint-setting").each(function(){var e=t(this);i[e.attr("name")]="checkbox"===e.attr("type")?e.is(":checked"):e.val()}),a.push(i)}),a.length>0&&(i.settings.breakpoints=a),t(".sidebar-settings").find(".postbox").each(function(){var e=t(this);i.panels_state[e.attr("data-name")]=e.hasClass("closed")?"closed":""}),i},previewSlider:function(){y.open(this.getSliderData())},previewSliderAll:function(e){var i=t.lightURLParse(e.attr("href")),a=i.lad_nonce,n=parseInt(i.id,10);t.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_get_slider_data",id:n,nonce:a},complete:function(e){var i=t.parseJSON(e.responseText);y.open(i)}})},updatePresets:function(e){var i,a=t.lightURLParse(e.attr("href")),n=a.method,s=a.up_nonce,o=t(".slider-setting-presets").val();("update"!==n&&"delete"!==n||null!==o)&&("save-new"===n?i=t('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window save-new-preset-dialog">\t\t<label>'+sp_js_vars.preset_name+'</label><input type="text" value="" class="preset-name">\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+sp_js_vars.save+'</a>\t\t\t<a class="button dialog-cancel" href="#">'+sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body"):"update"===n?i=t('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window delete-preset-dialog">\t\t<p>'+sp_js_vars.preset_update+'</p>\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+sp_js_vars.yes+'</a>\t\t\t<a class="button dialog-cancel" href="#">'+sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body"):"delete"===n&&(i=t('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window delete-preset-dialog">\t\t<p>'+sp_js_vars.preset_delete+'</p>\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+sp_js_vars.yes+'</a>\t\t\t<a class="button dialog-cancel" href="#">'+sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body")),i.find(".dialog-ok").on("click",function(e){e.preventDefault();var a="save-new"===n?i.find(".preset-name").val():t(".slider-setting-presets").val(),o={},r=[];("save-new"!==n||""!==a&&0===t(".slider-setting-presets").find('option[value="'+a+'"]').length)&&(t(".sidebar-settings").find(".setting").each(function(){var e=t(this);o[e.attr("name")]="checkbox"===e.attr("type")?e.is(":checked"):e.val()}),t(".breakpoints").find(".breakpoint").each(function(){var e=t(this),i={breakpoint_width:e.find('input[name="breakpoint_width"]').val()};e.find(".breakpoint-setting").each(function(){var e=t(this);i[e.attr("name")]="checkbox"===e.attr("type")?e.is(":checked"):e.val()}),r.push(i)}),r.length>0&&(o.breakpoints=r),t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_update_presets",method:n,name:a,settings:JSON.stringify(o),nonce:s},complete:function(e){"save-new"===n?t('<option value="'+a+'">'+a+"</option>").appendTo(t(".slider-setting-presets")):"delete"===n&&t(".slider-setting-presets").find('option[value="'+a+'"]').remove()}}),i.remove())}),i.find(".dialog-cancel").one("click",function(t){t.preventDefault(),i.remove()}),i.find(".modal-overlay").one("click",function(t){i.remove()}))},updateSettings:function(e){t.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_get_preset_settings",name:e},complete:function(e){var i=t.parseJSON(e.responseText);t.each(i,function(e,i){var a=t(".sidebar-settings").find('.setting[name="'+e+'"]');"checkbox"===a.attr("type")?!0===i?a.prop("checked",!0):!1===i&&a.prop("checked",!1):a.val(i),t(".breakpoints").empty(),"breakpoints"===e&&t.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_get_breakpoints_preset",data:JSON.stringify(i)},complete:function(e){t(e.responseText).appendTo(t(".breakpoints"))}})})}})},deleteSlider:function(e){var i=t.lightURLParse(e.attr("href")),a=i.da_nonce,n=parseInt(i.id,10),s=e.parents("tr"),o=t('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window delete-slider-dialog">\t\t<p class="dialog-question">'+sp_js_vars.slider_delete+'</p>\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+sp_js_vars.yes+'</a>\t\t\t<a class="button dialog-cancel" href="#">'+sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body");o.find(".dialog-ok").one("click",function(e){e.preventDefault(),t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_delete_slider",id:n,nonce:a},complete:function(t){n===parseInt(t.responseText,10)&&s.fadeOut(300,function(){s.remove()})}}),o.remove()}),o.find(".dialog-cancel").one("click",function(t){t.preventDefault(),o.remove()}),o.find(".modal-overlay").one("click",function(t){o.remove()})},duplicateSlider:function(e){var i=t.lightURLParse(e.attr("href")),a=i.dua_nonce,n=parseInt(i.id,10),s=void 0!==i.pages?parseInt(i.pages,10):1,o=void 0!==i.sp_page?parseInt(i.sp_page,10):1;t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_duplicate_slider",id:n,nonce:a,total_pages:s,current_page:o},complete:function(e){s>1&&o!==s?window.location=sp_js_vars.admin+"?page=sliderpro&sp_page="+s:t(e.responseText).appendTo(t(".sliders-list tbody")).hide().fadeIn()}})},exportSlider:function(e){var a=t.lightURLParse(e.attr("href")),n=a.ea_nonce,s=parseInt(a.id,10);i.open(s,n)},initSlides:function(){var e=this;t(".slides-container").find(".slide").each(function(i){e.initSlide(t(this))}),t(".slides-container").lightSortable({children:".slide",placeholder:"slide slide-placeholder",sortEnd:function(e){t(".slide").each(function(e){t(this).attr("data-position",e)})}})},initSlide:function(t,e){var i=this,a=t,s=new n(a,this.slideCounter,e);this.slides.push(s),s.on("duplicateSlide",function(t){i.duplicateSlide(t.slideData)}),s.on("deleteSlide",function(t){i.deleteSlide(t.id)}),a.attr("data-id",this.slideCounter),a.attr("data-position",this.slideCounter),this.slideCounter++},getSlide:function(e){var i;return t.each(this.slides,function(t,a){if(a.id===e)return i=a,!1}),i},duplicateSlide:function(e){var i=this,a=t.extend(!0,{},e),n=[{settings:{content_type:a.settings.content_type},main_image_source:a.mainImage.main_image_source}];t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_add_slides",data:JSON.stringify(n)},complete:function(e){var n=t(e.responseText).appendTo(t(".slides-container"));i.initSlide(n,a)}})},deleteSlide:function(e){var i=this,a=i.getSlide(e),n=t('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window delete-slide-dialog">\t\t<p class="dialog-question">'+sp_js_vars.slide_delete+'</p>\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+sp_js_vars.yes+'</a>\t\t\t<a class="button dialog-cancel" href="#">'+sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body");n.find(".dialog-ok").one("click",function(e){e.preventDefault(),a.off("duplicateSlide"),a.off("deleteSlide"),a.remove(),n.remove(),i.slides.splice(t.inArray(a,i.slides),1)}),n.find(".dialog-cancel").one("click",function(t){t.preventDefault(),n.remove()}),n.find(".modal-overlay").one("click",function(t){n.remove()})},addEmptySlide:function(){var e=this;t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_add_slides"},complete:function(i){var a=t(i.responseText).appendTo(t(".slides-container"));e.initSlide(a)}})},addImageSlides:function(){var i=this;m.open(function(a){var n=[];t.each(a,function(t,e){n.push({main_image_id:e.id,main_image_source:e.url,main_image_alt:e.alt,main_image_title:e.title,main_image_width:e.width,main_image_height:e.height})}),t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_add_slides",data:JSON.stringify(n)},complete:function(a){var s=t(".slides-container").find(".slide").length-1,o=t(".slides-container").append(a.responseText),r=-1===s?"":":gt("+s+")";o.find(".slide"+r).each(function(e){var a=t(this);i.initSlide(a,{mainImage:n[e],thumbnail:{},caption:"",layers:{},html:"",settings:{}})}),e.checkSlideImageSize()}})})},addPostsSlides:function(){var e=this;t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_add_slides",data:JSON.stringify([{settings:{content_type:"posts"}}])},complete:function(i){var a=t(i.responseText).appendTo(t(".slides-container")),n=e.slideCounter;e.initSlide(a,{mainImage:{main_image_source:"[sp_image_src]",main_image_alt:"[sp_image_alt]",main_image_link:"[sp_link_url]"},thumbnail:{},caption:"",layers:[{id:1,name:"Layer 1",type:"paragraph",text:"[sp_title]",settings:{position:"bottomLeft",horizontal:"0",vertical:"0",preset_styles:["sp-black","sp-padding"]}}],html:"",settings:{content_type:"posts"}}),v.open(n)}})},addGallerySlides:function(){var e=this;t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_add_slides",data:JSON.stringify([{settings:{content_type:"gallery"}}])},complete:function(i){var a=t(i.responseText).appendTo(t(".slides-container")),n=e.slideCounter;e.initSlide(a,{mainImage:{main_image_source:"[sp_image_src]",main_image_alt:"[sp_image_alt]"},thumbnail:{},caption:"",layers:{},html:"",settings:{content_type:"gallery"}}),v.open(n)}})},addFlickrSlides:function(){var e=this;t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_add_slides",data:JSON.stringify([{settings:{content_type:"flickr"}}])},complete:function(i){var a=t(i.responseText).appendTo(t(".slides-container")),n=e.slideCounter;e.initSlide(a,{mainImage:{main_image_source:"[sp_image_src]",main_image_link:"[sp_image_link]"},thumbnail:{},caption:"",layers:[{id:1,name:"Layer 1",type:"paragraph",text:"[sp_image_description]",settings:{position:"bottomLeft",horizontal:"0",vertical:"0",preset_styles:["sp-black","sp-padding"]}}],html:"",settings:{content_type:"flickr"}}),v.open(n)}})},addBreakpoint:function(){var e="",i=t('input[name="breakpoint_width"]').last().val();void 0===i?e="960":""!==i&&(e=i-190),t.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_add_breakpoint",data:e},complete:function(e){t(e.responseText).appendTo(t(".breakpoints"))}})},addBreakpointSetting:function(e,i){t.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_add_breakpoint_setting",data:e},complete:function(e){t(e.responseText).appendTo(i)}})},getTaxonomies:function(e,i){var a=this,n=[];t.each(e,function(t,e){void 0===a.postsData[e]&&n.push(e)}),0!==n.length?t.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_get_taxonomies",post_names:JSON.stringify(n)},complete:function(e){var n=t.parseJSON(e.responseText);t.each(n,function(t,e){a.postsData[t]=e}),i(a.postsData)}}):i(this.postsData)},showInfo:function(e){var i=e,a=i.attr("data-info"),n=null;void 0!==a&&(n=t('<div class="info-tooltip">'+a+"</div>").appendTo(i.parent())).css({left:-n.outerWidth(!0),marginTop:.5*-n.outerHeight(!0)-9}),i.on("mouseout",function(){null!==n&&n.remove()})},resizeSlideImages:function(){var e=t(".slide-preview").width()/t(".slide-preview").height();t(".slide-preview > img").each(function(){var i=t(this);i.width()/i.height()>e?i.css({width:"auto",height:"100%"}):i.css({width:"100%",height:"auto"})})},checkSlideImageSize:function(e){if(0!==t(".image-size-warning").length){var i=!1,a=t(".sidebar-settings").find('.setting[name="width"]').val(),n=t(".sidebar-settings").find('.setting[name="height"]').val();t.each(this.slides,function(t,e){var s=e.getData("mainImage");0!==parseInt(s.main_image_width,10)&&0!==parseInt(s.main_image_height,10)&&(!1===isNaN(a)&&parseInt(s.main_image_width,10)<parseInt(a,10)||!1===isNaN(n)&&parseInt(s.main_image_height,10)<parseInt(n,10))&&(i=!0)}),!0===i?t(".image-size-warning").css("display","block"):t(".image-size-warning").css("display","")}}},i={exportWindow:null,open:function(e,i){var a=this;t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_export_slider",id:e,nonce:i},complete:function(e){a.exportWindow=t(e.responseText).appendTo("body"),a.init()}})},init:function(){var e=this;this.exportWindow.find(".close-x").on("click",function(t){t.preventDefault(),e.close()}),this.exportWindow.find("textarea").on("click",function(e){e.preventDefault(),t(this).focus(),t(this).select()})},close:function(){this.exportWindow.find(".close-x").off("click"),this.exportWindow.find("textarea").off("click"),this.exportWindow.remove()}},a={importWindow:null,$importButton:null,paginationParams:null,open:function(){var e=this;t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_import_slider"},complete:function(i){e.importWindow=t(i.responseText).appendTo("body"),e.init()}})},setPaginationParams:function(t){this.paginationParams=this.paginationParams||{},this.paginationParams.currentPage=t.currentPage,this.paginationParams.totalPages=t.totalPages},init:function(){var t=this;this.$importButton=this.importWindow.find(".save"),this.$importButton.data("label",this.$importButton.text()),this.$importButton.on("click",function(e){var i=t.importWindow.find("textarea").val();e.preventDefault(),""!==i&&(t.importWindow.find(".save").addClass("disabled").text(sp_js_vars.slider_importing),t.save())}),this.importWindow.find(".close-x").on("click",function(e){e.preventDefault(),t.close()})},save:function(){var e,i=this,a=this.importWindow.find("textarea").val();if(-1!==a.indexOf("<?xml version"))this.loadLegacyMap(function(t){try{e=i.convertLegacySlider(a,t),i.sendData(e)}catch(t){i.importWindow.find("textarea").val(t),i.$importButton.removeClass("disabled").text(i.$importButton.data("label"))}});else try{e=t.parseJSON(a),this.sendData(e)}catch(t){this.importWindow.find("textarea").val(t),this.$importButton.removeClass("disabled").text(this.$importButton.data("label"))}},sendData:function(e){var i=this;e.id=-1,e.nonce=sp_js_vars.sa_nonce,e.action="import";var a=null!==this.paginationParams?{sp_page:void 0!==this.paginationParams.currentPage?this.paginationParams.currentPage:1,pages:void 0!==this.paginationParams.totalPages?this.paginationParams.totalPages:1}:{};t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_save_slider",data:JSON.stringify(e),...a},complete:function(e){(0!==t(".sliders-list .no-slider-row").length&&t(".sliders-list .no-slider-row").remove(),null!==i.paginationParams&&i.paginationParams.totalPages>1&&i.paginationParams.currentPage!==i.paginationParams.totalPages)?window.location=sp_js_vars.admin+"?page=sliderpro&sp_page="+i.paginationParams.totalPages:(t(e.responseText).appendTo(t(".sliders-list tbody")).hide().fadeIn(),i.close())}})},loadLegacyMap:function(e){t.ajax({url:sp_js_vars.plugin+"/admin/assets/js/legacy-map.json",type:"get",dataType:"json",success:function(t){e(t)}})},decodeHTML:function(t){var e={"&amp;":"&","&quot;":'"',"&#039":"'","&lt;":"<","&gt;":">"};for(var i in e)if(e.hasOwnProperty(i)){var a=new RegExp(i,"g");t=t.replace(a,e[i])}return t=t.replace(/\\/g,"")},convertLegacySlider:function(e,i){try{var a=t.parseXML(e)}catch(t){throw new Error(t)}var n=this,s={name:t(a).find("name").first().text(),settings:{},slides:[]},o=i.settings,r=i.slideContent,d=i.slideSettings,l=i.layerSettings;return t(a).find("settings").first().children().each(function(t,e){var i=o[e.nodeName];if(void 0!==i){var a,n=i.newName,r=i.type;"select"===r?a=i.options[e.textContent]:"boolean"===r?a="0"!=e.textContent:"number"===r?a=parseFloat(e.textContent):"string"===r?a=e.textContent:"mixed"===r&&(a=isNaN(e.textContent)?e.textContent:parseFloat(e.textContent)),s.settings[n]=a}}),t(a).find("slide").each(function(e,i){var a={settings:{}},o=[],c=0;t(i).find("content").first().children().each(function(t,e){var i=r[e.nodeName];if(void 0!==i){var s,d=i.newName;"string"===i.type&&(s=n.decodeHTML(e.textContent)),a[d]=s}else if(-1!==e.nodeName.indexOf("layer_")){var l={type:"div"};l.text=n.decodeHTML(e.textContent),o.push(l)}}),t(i).find("settings").first().children().each(function(t,e){var i=d[e.nodeName];if(void 0!==i){var n,s=i.newName,r=i.type;"stringToArray"===r?n=e.textContent.split(i.delimiter):"select"===r?n=i.options[e.textContent]:"boolean"===r?n="0"!=e.textContent:"number"===r?n=parseFloat(e.textContent):"string"===r?n=e.textContent:"mixed"===r&&(n=isNaN(e.textContent)?e.textContent:parseFloat(xmlNode.textContent)),a.settings[s]=n}else if(-1!==e.nodeName.indexOf("layer_")){var p={};e.textContent.split("+").forEach(function(t){var e=t.split("="),i=e[0],a=e[1],n=l[i];if(void 0!==n){var s=n.newName,o=n.type;if("stringToArray"===o){if("layer_preset_styles"===i){var r=[];a.split(n.delimiter).forEach(function(t){void 0!==n.options[t]&&r.push(n.options[t])})}}else"select"===o?r=n.options[a]:"boolean"===o?r="0"!=a:"number"===o?r=parseFloat(a):"string"===o?r=a:"mixed"===o&&(r=isNaN(a)?a:parseFloat(a));p[s]=r}}),o[c].position=c,o[c].name="Layer "+c,o[c].settings=p,c++}}),0!==o.length&&(a.layers=o),s.slides.push(a)}),s},close:function(){this.importWindow.find(".close-x").off("click"),this.importWindow.find(".save").off("click"),this.importWindow.remove()}},n=function(e,i,a){this.$slide=e,this.id=i,this.data=a,this.events=t({}),void 0===this.data&&(this.data={mainImage:{},thumbnail:{},caption:"",layers:{},html:"",settings:{}}),this.init()};n.prototype={init:function(){var t=this;this.$slide.find(".slide-preview").on("click",function(i){var a=t.getData("settings").content_type;void 0!==a&&"custom"!==a||m.open(function(i){var a=i[0];t.setData("mainImage",{main_image_id:a.id,main_image_source:a.url,main_image_alt:a.alt,main_image_title:a.title,main_image_width:a.width,main_image_height:a.height}),t.updateSlidePreview(),e.checkSlideImageSize()})}),this.$slide.find(".edit-main-image").on("click",function(e){e.preventDefault(),s.open(t.id)}),this.$slide.find(".edit-thumbnail").on("click",function(e){e.preventDefault(),o.open(t.id)}),this.$slide.find(".edit-caption").on("click",function(e){e.preventDefault(),r.open(t.id)}),this.$slide.find(".edit-layers").on("click",function(e){e.preventDefault(),l.open(t.id)}),this.$slide.find(".edit-html").on("click",function(e){e.preventDefault(),d.open(t.id)}),this.$slide.find(".edit-settings").on("click",function(e){e.preventDefault(),v.open(t.id)}),this.$slide.find(".delete-slide").on("click",function(e){e.preventDefault(),t.trigger({type:"deleteSlide",id:t.id})}),this.$slide.find(".duplicate-slide").on("click",function(e){e.preventDefault(),t.trigger({type:"duplicateSlide",slideData:t.data})}),this.resizeImage()},getData:function(e){if("all"===e){var i={};return t.each(this.data.mainImage,function(t,e){i[t]=e}),t.each(this.data.thumbnail,function(t,e){i[t]=e}),i.caption=this.data.caption,i.layers=this.data.layers,i.html=this.data.html,i.settings=this.data.settings,i}return"mainImage"===e?this.data.mainImage:"thumbnail"===e?this.data.thumbnail:"caption"===e?this.data.caption:"layers"===e?this.data.layers:"html"===e?this.data.html:"settings"===e?this.data.settings:void 0},setData:function(e,i){var a=this;"all"===e?this.data=i:"mainImage"===e?t.each(i,function(t,e){a.data.mainImage[t]=e}):"thumbnail"===e?t.each(i,function(t,e){a.data.thumbnail[t]=e}):"caption"===e?this.data.caption=i:"layers"===e?this.data.layers=i:"html"===e?this.data.html=i:"settings"===e&&(this.data.settings=i)},remove:function(){this.$slide.find(".slide-preview").off("click"),this.$slide.find(".edit-main-image").off("click"),this.$slide.find(".edit-caption").off("click"),this.$slide.find(".edit-layers").off("click"),this.$slide.find(".edit-html").off("click"),this.$slide.find(".edit-settings").off("click"),this.$slide.find(".delete-slide").off("click"),this.$slide.find(".duplicate-slide").off("click"),this.$slide.fadeOut(500,function(){t(this).remove()})},updateSlidePreview:function(){var e=this.$slide.find(".slide-preview"),i=this.data.settings.content_type;if(e.empty(),void 0===i||"custom"===i){var a=this.data.mainImage.main_image_source;void 0!==a&&""!==a?(t('<img src="'+a+'" />').appendTo(e),this.resizeImage()):0!==this.data.layers.length&&t.each(this.data.layers,function(i,a){if("video"===a.type&&""!==a.video_poster)return t('<img src="'+a.video_poster+'" />').appendTo(e),!1}),0===e.find("img").length&&t('<p class="no-image">'+sp_js_vars.no_image+"</p>").appendTo(e),this.$slide.removeClass("dynamic-slide")}else"posts"===i?(t("<p>[ "+sp_js_vars.posts_slides+" ]</p>").appendTo(e),this.$slide.addClass("dynamic-slide")):"gallery"===i?(t("<p>[ "+sp_js_vars.gallery_slides+" ]</p>").appendTo(e),this.$slide.addClass("dynamic-slide")):"flickr"===i&&(t("<p>[ "+sp_js_vars.flickr_slides+" ]</p>").appendTo(e),this.$slide.addClass("dynamic-slide"))},resizeImage:function(){var t=this.$slide.find(".slide-preview"),e=this.$slide.find(".slide-preview > img");if(e.length)var i=setInterval(function(){!0===e[0].complete&&(clearInterval(i),e.width()/e.height()>t.width()/t.height()?e.css({width:"auto",height:"100%"}):e.css({width:"100%",height:"auto"}))},100)},on:function(t,e){this.events.on(t,e)},off:function(t){this.events.off(t)},trigger:function(t){this.events.triggerHandler(t)}};var s={editor:null,currentSlide:null,needsPreviewUpdate:!1,open:function(i){this.currentSlide=e.getSlide(i);var a=this,n=this.currentSlide.getData("mainImage"),s=this.currentSlide.getData("settings").content_type,o=t('.slide[data-id="'+i+'"]').find(".slide-spinner").css({display:"inline-block",visibility:"visible"});void 0===s&&(s="custom"),t.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_load_main_image_editor",data:JSON.stringify(n),content_type:s},complete:function(e){t("body").append(e.responseText),a.init(),o.css({display:"",visibility:""})}})},init:function(){var i=this;this.$editor=t(".main-image-editor"),this.$editor.find(".close-x").on("click",function(t){t.preventDefault(),i.save(),i.close(),e.checkSlideImageSize()}),this.$editor.find(".image-loader, .additional-image-loader").on("click",function(t){t.preventDefault(),i.openMediaLibrary(t)}),this.$editor.find(".clear-fieldset").on("click",function(t){t.preventDefault(),i.clearFieldset(t)}),this.$editor.find('input[name="main_image_source"]').on("input",function(t){i.needsPreviewUpdate=!0}),this.$editor.find(".show-additional-images, .hide-additional-images").on("click",function(e){setTimeout(function(){t(window).trigger("resize")},1)}),t(window).on("resize.mainImageEditor",function(){i.$editor.find(".modal-window").outerWidth()>=t(window).width()?i.$editor.addClass("modal-window-left"):i.$editor.removeClass("modal-window-left"),i.$editor.find(".modal-window").outerHeight()>=t(window).height()-60?i.$editor.addClass("modal-window-top"):i.$editor.removeClass("modal-window-top")}),this.$editor.find(".show-hide-info, .show-hide-dynamic-tags").on("click",function(){t(window).trigger("resize")}),t(window).trigger("resize")},openMediaLibrary:function(e){e.preventDefault();var i=this,a=this.$editor.find(".main-image .image-loader"),n=t(e.target).hasClass("additional-image-loader"),s=t(e.target).siblings("input");m.open(function(e){var o=e[0];!0===n?s.val(o.url):(0!==a.find("img").length?a.find("img").attr("src",o.url):(a.find(".no-image").remove(),t('<img src="'+o.url+'" />').appendTo(a)),i.$editor.find('input[name="main_image_id"]').val(o.id),i.$editor.find('input[name="main_image_source"]').val(o.url),i.$editor.find('input[name="main_image_alt"]').val(o.alt),i.$editor.find('input[name="main_image_title"]').val(o.title),i.$editor.find('input[name="main_image_width"]').val(o.width),i.$editor.find('input[name="main_image_height"]').val(o.height),i.needsPreviewUpdate=!0)})},clearFieldset:function(e){e.preventDefault();var i=t(e.target).parents(".fieldset"),a=i.find(".image-loader");i.find("input").val(""),0!==a.find("img").length&&(a.find("img").remove(),t('<p class="no-image">'+sp_js_vars.no_image+"</p>").appendTo(a),this.needsPreviewUpdate=!0)},save:function(){var e={};this.$editor.find(".field").each(function(){var i=t(this);e[i.attr("name")]=i.val()}),this.currentSlide.setData("mainImage",e),!0===this.needsPreviewUpdate&&(this.currentSlide.updateSlidePreview(),this.needsPreviewUpdate=!1)},close:function(){this.$editor.find(".close-x").off("click"),this.$editor.find(".image-loader").off("click"),this.$editor.find(".additional-image-loader").off("click"),this.$editor.find(".clear-fieldset").off("click"),this.$editor.find('input[name="main_image_source"]').off("input"),t(window).off("resize.mainImageEditor"),t("body").find(".modal-overlay, .modal-window-container").remove()}},o={editor:null,currentSlide:null,open:function(i){this.currentSlide=e.getSlide(i);var a=this,n=this.currentSlide.getData("thumbnail"),s=this.currentSlide.getData("settings").content_type,o=t('.slide[data-id="'+i+'"]').find(".slide-spinner").css({display:"inline-block",visibility:"visible"});void 0===s&&(s="custom"),t.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_load_thumbnail_editor",data:JSON.stringify(n),content_type:s},complete:function(e){t("body").append(e.responseText),a.init(),o.css({display:"",visibility:""})}})},init:function(){var e=this;this.$editor=t(".thumbnail-editor"),this.$editor.find(".close-x").on("click",function(t){t.preventDefault(),e.save(),e.close()}),this.$editor.find(".image-loader, .additional-image-loader").on("click",function(t){t.preventDefault(),e.openMediaLibrary(t)}),this.$editor.find(".clear-fieldset").on("click",function(t){t.preventDefault(),e.clearFieldset(t)}),this.$editor.find(".thumbnail-html-code").codeEditor(),t(window).on("resize.thumbnailEditor",function(){e.$editor.find(".modal-window").outerWidth()>=t(window).width()?e.$editor.addClass("modal-window-left"):e.$editor.removeClass("modal-window-left"),e.$editor.find(".modal-window").outerHeight()>=t(window).height()-60?e.$editor.addClass("modal-window-top"):e.$editor.removeClass("modal-window-top")}),this.$editor.find(".show-hide-info, .show-hide-dynamic-tags").on("click",function(){t(window).trigger("resize")}),t(window).trigger("resize.thumbnailEditor")},openMediaLibrary:function(e){e.preventDefault();var i=this,a=this.$editor.find(".thumbnail .image-loader"),n=t(e.target).hasClass("additional-image-loader"),s=t(e.target).siblings("input");m.open(function(e){var o=e[0];!0===n?s.val(o.url):(0!==a.find("img").length?a.find("img").attr("src",o.url):(a.find(".no-image").remove(),t('<img src="'+o.url+'" />').appendTo(a)),i.$editor.find('input[name="thumbnail_source"]').val(o.url),i.$editor.find('input[name="thumbnail_alt"]').val(o.alt),i.$editor.find('input[name="thumbnail_title"]').val(o.title))})},clearFieldset:function(e){e.preventDefault();var i=t(e.target).parents(".fieldset"),a=i.find(".image-loader");i.find("input").val(""),0!==a.find("img").length&&(a.find("img").remove(),t('<p class="no-image">'+sp_js_vars.no_image+"</p>").appendTo(a))},save:function(){var e={};this.$editor.find(".field").each(function(){var i=t(this);"thumbnail_content"===i.attr("name")?e.thumbnail_content=i.data("codeEditor").getValue():e[i.attr("name")]=i.val()}),this.currentSlide.setData("thumbnail",e)},close:function(){this.$editor.find(".close-x").off("click"),this.$editor.find(".image-loader").off("click"),this.$editor.find(".additional-image-loader").off("click"),this.$editor.find(".clear-fieldset").off("click"),this.$editor.find('input[name="thumbnail_source"]').off("input"),this.$editor.find(".thumbnail-html-code").codeEditor("destroy"),t(window).off("resize.thumbnailEditor"),t("body").find(".modal-overlay, .modal-window-container").remove()}},r={editor:null,currentSlide:null,open:function(i){this.currentSlide=e.getSlide(i);var a=this,n=this.currentSlide.getData("caption"),s=t('.slide[data-id="'+i+'"]').find(".slide-spinner").css({display:"inline-block",visibility:"visible"}),o=this.currentSlide.getData("settings").content_type;t.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_load_caption_editor",data:n,content_type:o},complete:function(e){t("body").append(e.responseText),a.init(),s.css({display:"",visibility:""})}})},init:function(){var e=this;this.$editor=t(".caption-editor"),this.$editor.find(".close-x").on("click",function(t){t.preventDefault(),e.save(),e.close()}),t(window).on("resize.captionEditor",function(){e.$editor.find(".modal-window").outerWidth()>=t(window).width()?e.$editor.addClass("modal-window-left"):e.$editor.removeClass("modal-window-left"),e.$editor.find(".modal-window").outerHeight()>=t(window).height()-60?e.$editor.addClass("modal-window-top"):e.$editor.removeClass("modal-window-top")}),this.$editor.find(".show-hide-info, .show-hide-dynamic-tags").on("click",function(){t(window).trigger("resize")}),t(window).trigger("resize")},save:function(){this.currentSlide.setData("caption",this.$editor.find("textarea").val())},close:function(){this.$editor.find(".close-x").off("click"),t(window).off("resize.captionEditor"),t("body").find(".modal-overlay, .modal-window-container").remove()}},d={editor:null,currentSlide:null,open:function(i){this.currentSlide=e.getSlide(i);var a=this,n=this.currentSlide.getData("html"),s=t('.slide[data-id="'+i+'"]').find(".slide-spinner").css({display:"inline-block",visibility:"visible"}),o=this.currentSlide.getData("settings").content_type;t.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_load_html_editor",data:n,content_type:o},complete:function(e){t("body").append(e.responseText),a.init(),s.css({display:"",visibility:""})}})},init:function(){var e=this;this.$editor=t(".html-editor"),this.$editor.find(".html-code").codeEditor(),this.$editor.find(".close-x").on("click",function(t){t.preventDefault(),e.save(),e.close()}),t(window).on("resize.htmlEditor",function(){e.$editor.find(".modal-window").outerWidth()>=t(window).width()?e.$editor.addClass("modal-window-left"):e.$editor.removeClass("modal-window-left"),e.$editor.find(".modal-window").outerHeight()>=t(window).height()-60?e.$editor.addClass("modal-window-top"):e.$editor.removeClass("modal-window-top")}),this.$editor.find(".show-hide-info, .show-hide-dynamic-tags").on("click",function(){t(window).trigger("resize")}),t(window).trigger("resize")},save:function(){this.currentSlide.setData("html",this.$editor.find(".html-code").data("codeEditor").getValue())},close:function(){this.$editor.find(".close-x").off("click"),this.$editor.find(".html-code").codeEditor("destroy"),t("window").off("resize.htmlEditor"),t("body").find(".modal-overlay, .modal-window-container").remove()}},l={editor:null,currentSlide:null,layersData:null,layers:[],counter:0,isWorking:!1,open:function(i){this.currentSlide=e.getSlide(i),this.layersData=this.currentSlide.getData("layers");var a=this,n=t('.slide[data-id="'+i+'"]').find(".slide-spinner").css({display:"inline-block",visibility:"visible"}),s=this.currentSlide.getData("settings").content_type;t.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_load_layers_editor",data:JSON.stringify(this.layersData),content_type:s},complete:function(e){t("body").append(e.responseText),a.init(),n.css({display:"",visibility:""})}})},init:function(){var e=this;this.counter=0,this.$editor=t(".layers-editor"),this.$editor.find(".close-x").on("click",function(t){t.preventDefault(),e.save(),e.close()}),t(window).on("resize.layersEditor",function(){e.$editor.find(".modal-window").outerWidth()>=t(window).width()?e.$editor.addClass("modal-window-left"):e.$editor.removeClass("modal-window-left"),e.$editor.find(".modal-window").outerHeight()>=t(window).height()-60?e.$editor.addClass("modal-window-top"):e.$editor.removeClass("modal-window-top")}),this.$editor.find(".show-hide-info").on("click",function(){t(window).trigger("resize")}),this.$editor.find(".add-layer-group").on("click",function(i){if(i.preventDefault(),!0!==e.isWorking){var a="paragraph";void 0!==t(i.target).attr("data-type")&&(a=t(i.target).attr("data-type")),e.addNewLayer(a)}}),this.$editor.find(".delete-layer").on("click",function(t){t.preventDefault(),e.deleteLayer()}),this.$editor.find(".duplicate-layer").on("click",function(t){t.preventDefault(),!0!==e.isWorking&&e.duplicateLayer()}),this.initViewport(),t.each(this.layersData,function(t,i){var a=i;a.createMode="init",e.createLayer(a),e.counter=Math.max(e.counter,a.id)}),t(".list-layers").lightSortable({children:".list-layer",placeholder:"list-layer-placeholder",sortEnd:function(i){if(i.startPosition!==i.endPosition){var a=e.layers[i.startPosition];e.layers.splice(i.startPosition,1),e.layers.splice(i.endPosition,0,a);var n=e.$editor.find(".viewport-layers"),s=n.children().length-1;t(".list-layers").find(".list-layer").each(function(e,i){t(i).attr("data-position",e)});var o=n.find(".viewport-layer").eq(s-i.startPosition).detach();s-i.startPosition<s-i.endPosition?o.insertAfter(n.find(".viewport-layer").eq(s-1-i.endPosition)):o.insertBefore(n.find(".viewport-layer").eq(s-i.endPosition))}}}),t(".list-layers").find(".list-layer").each(function(e,i){t(i).attr("data-position",e)}),0!==this.layers.length&&this.layers[0].triggerSelect(),t(window).trigger("resize.layersEditor")},initViewport:function(){var e=this.$editor.find(".layer-viewport"),i=t('<div class="slider-pro viewport-layers"></div>').appendTo(e),a=t(".sidebar-settings").find('.setting[name="width"]').val(),n=t(".sidebar-settings").find('.setting[name="height"]').val(),s=t(".sidebar-settings").find('.setting[name="custom_class"]').val(),o=this.currentSlide.getData("mainImage").main_image_source;if(a=isNaN(a)?t(window).width()*(parseInt(a,10)/100):parseInt(a,10),n=isNaN(n)?t(window).height()*(parseInt(n,10)/100):parseInt(n,10),e.css({width:a,height:n}),i.css({width:a,height:n}),""!==s&&i.addClass(s),void 0!==o&&""!==o&&-1===o.indexOf("[")){var r=t(".sidebar-settings").find('.setting[name="image_scale_mode"]').val(),d=t(".sidebar-settings").find('.setting[name="center_image"]').is(":checked");backgroundImage={"background-image":"url("+o+")","background-repeat":"no-repeat"},"cover"===r?backgroundImage["background-size"]="cover":"contain"===r?backgroundImage["background-size"]="contain":"exact"===r&&(backgroundImage["background-size"]="100% 100%"),!0===d&&(backgroundImage["background-position"]="center center"),i.css(backgroundImage)}},createLayer:function(e){var i,a=this;"paragraph"===e.type?i=new p(e):"heading"===e.type?i=new h(e):"image"===e.type?i=new u(e):"div"===e.type?i=new f(e):"video"===e.type&&(i=new g(e)),"new"===e.createMode||"duplicate"===e.createMode?this.layers.unshift(i):this.layers.push(i),i.on("select",function(e){t.each(a.layers,function(t,i){!0===i.isSelected()&&i.deselect(),i.getID()===e.id&&i.select()})}),i.triggerSelect(),this.isWorking=!1,this.$editor.removeClass("no-layers")},addNewLayer:function(e){var i=this;this.isWorking=!0,this.counter++,t.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_add_layer_settings",id:this.counter,type:e},complete:function(a){t(a.responseText).appendTo(t(".layers-settings")),t('<li class="list-layer" data-id="'+i.counter+'" data-position="'+i.layers.length+'">Layer '+i.counter+"</li>").prependTo(i.$editor.find(".list-layers")),i.createLayer({id:i.counter,type:e,createMode:"new"}),t(window).trigger("resize.layersEditor")}})},deleteLayer:function(){var e,i=this;t.each(this.layers,function(t,a){if(!0===a.isSelected())return a.destroy(),i.layers.splice(t,1),e=t,!1}),0!==this.layers.length?0===e?this.layers[0].triggerSelect():this.layers[e-1].triggerSelect():this.$editor.addClass("no-layers")},duplicateLayer:function(){var e,i=this;t.each(this.layers,function(t,i){!0===i.isSelected()&&(e=i.getData())}),void 0!==e&&(this.isWorking=!0,this.counter++,t.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_add_layer_settings",id:this.counter,type:e.type,text:e.text,heading_type:e.heading_type,image_source:e.image_source,image_alt:e.image_alt,image_link:e.image_link,image_retina:e.image_retina,settings:JSON.stringify(e.settings)},complete:function(a){t(a.responseText).appendTo(t(".layers-settings")),t('<li class="list-layer" data-id="'+i.counter+'">Layer '+i.counter+"</li>").prependTo(i.$editor.find(".list-layers")),e.id=i.counter,e.createMode="duplicate",i.createLayer(e),t(window).trigger("resize.layersEditor")}}))},save:function(){var e=[];t.each(this.layers,function(t,i){e.push(i.getData())}),this.currentSlide.setData("layers",e),this.currentSlide.updateSlidePreview()},close:function(){this.$editor.find(".close-x").off("click"),this.$editor.find(".add-layer-group").off("click"),this.$editor.find(".delete-layer").off("click"),this.$editor.find(".duplicate-layer").off("click"),t(window).off("resize.layersEditor"),t(".list-layers").lightSortable("destroy"),t.each(this.layers,function(t,e){e.destroy()}),this.layers.length=0,t("body").find(".modal-overlay, .modal-window-container").remove()}},c=function(e){this.data=e,this.id=this.data.id,this.selected=!1,this.events=t({}),this.$editor=t(".layers-editor"),this.$viewportLayers=this.$editor.find(".viewport-layers"),this.$viewportLayer=null,this.$listLayer=this.$editor.find('.list-layer[data-id="'+this.id+'"]'),this.$layerSettings=this.$editor.find('.layer-settings[data-id="'+this.id+'"]'),this.init()};c.prototype={init:function(){this.initLayerContent(),this.initLayerSettings(),this.initViewportLayer(),this.initLayerDragging(),this.initListLayer()},getData:function(){var e={};return e.id=this.id,e.position=parseInt(this.$listLayer.attr("data-position"),10),e.name=this.$listLayer.text(),e.settings={},this.$layerSettings.find(".setting").each(function(){var i=t(this),a=i.attr("type");"radio"===a?i.is(":checked")&&(e.settings[i.attr("name").split("-")[0]]=i.val()):"checkbox"===a?e.settings[i.attr("name")]=i.is(":checked"):i.is("select")&&void 0!==i.attr("multiple")?e.settings[i.attr("name")]=null===i.val()?[]:i.val():e.settings[i.attr("name")]=i.val()}),e},getID:function(){return this.id},select:function(){this.selected=!0,this.$listLayer.addClass("selected-list-layer"),this.$layerSettings.addClass("selected-layer-settings")},deselect:function(){this.selected=!1,this.$listLayer.removeClass("selected-list-layer"),this.$layerSettings.removeClass("selected-layer-settings")},triggerSelect:function(){this.trigger({type:"select",id:this.id})},isSelected:function(){return this.selected},destroy:function(){this.$viewportLayer.off("mousedown"),this.$viewportLayer.off("mouseup"),this.$viewportLayer.off("click"),this.$listLayer.off("click"),this.$listLayer.off("dblclick"),this.$listLayer.off("selectstart"),this.$editor.off("mousemove.layer"+this.id),this.$editor.off("click.layer"+this.id),this.$layerSettings.find('select[name="preset_styles"]').multiCheck("destroy"),this.$layerSettings.find('.setting[name="width"]').off("change"),this.$layerSettings.find('.setting[name="height"]').off("change"),this.$layerSettings.find('.setting[name="position"]').off("change"),this.$layerSettings.find('.setting[name="horizontal"]').off("change"),this.$layerSettings.find('.setting[name="vertical"]').off("change"),this.$layerSettings.find('.setting[name="preset_styles"]').off("change"),this.$layerSettings.find('.setting[name="custom_class"]').off("change"),this.$viewportLayer.remove(),this.$listLayer.remove(),this.$layerSettings.remove()},on:function(t,e){this.events.on(t,e)},off:function(t){this.events.off(t)},trigger:function(t){this.events.triggerHandler(t)},initViewportLayer:function(){var t=this;if(this.$viewportLayer.attr("data-id",this.id),"new"===this.data.createMode||"duplicate"===this.data.createMode?this.$viewportLayer.appendTo(this.$viewportLayers):"init"===this.data.createMode&&this.$viewportLayer.prependTo(this.$viewportLayers),"new"===this.data.createMode)this.$viewportLayer.css({width:"auto",height:"auto",left:0,top:0}),this.$viewportLayer.hasClass("sp-layer")?this.$viewportLayer.addClass("sp-black sp-padding"):this.$viewportLayer.find(".sp-layer").addClass("sp-black sp-padding");else if("init"===this.data.createMode||"duplicate"===this.data.createMode){var e=null!==this.data.settings.preset_styles?this.data.settings.preset_styles.join(" "):"";e+=" "+this.data.settings.custom_class,this.$viewportLayer.hasClass("sp-layer")?this.$viewportLayer.addClass(e):this.$viewportLayer.find(".sp-layer").addClass(e),this.$viewportLayer.css({width:this.data.settings.width,height:this.data.settings.height});var i,a,n,s=this.data.settings.position.toLowerCase(),o=this.data.settings.horizontal,r=this.data.settings.vertical,d=parseInt(t.$viewportLayer.css("width"),10),l=parseInt(t.$viewportLayer.css("height"),10);i=-1!==s.indexOf("right")?"right":-1!==s.indexOf("left")?"left":"center",a=-1!==s.indexOf("bottom")?"bottom":-1!==s.indexOf("top")?"top":"center",n=-1===o.indexOf("px")&&-1===o.indexOf("%")?"px":"","center"===i?this.$viewportLayer.css({width:d,marginLeft:"auto",marginRight:"auto",left:o+n,right:0}):this.$viewportLayer.css(i,o+n),n=-1===r.indexOf("px")&&-1===r.indexOf("%")?"px":"","center"===a?this.$viewportLayer.css({height:l,marginTop:"auto",marginBottom:"auto",top:r+n,bottom:0}):this.$viewportLayer.css(a,r+n)}this.$viewportLayer.on("mousedown",function(){t.triggerSelect()}),this.$viewportLayer.on("click","a",function(t){t.preventDefault()})},initLayerDragging:function(){var t=this,e=0,i=0,a=0,n=0,s=!1,o=!1,r=!1;this.$viewportLayer.on("mousedown",function(o){o.preventDefault(),e=o.pageX,i=o.pageY,a=t.$viewportLayer[0].offsetLeft,n=t.$viewportLayer[0].offsetTop,s=!0,r=!1}),this.$editor.find(".viewport-layers").on("mousemove.layer"+this.id,function(d){d.preventDefault(),r=!0,!0===s&&(t.$viewportLayer.css({left:a+d.pageX-e,top:n+d.pageY-i}),!1===o&&(o=!0,t.$viewportLayer.css({right:"auto",bottom:"auto"})))}),this.$viewportLayer.on("mouseup",function(e){if(e.preventDefault(),s=!1,o=!1,!1!==r){var i,a,n=t.$layerSettings.find('.setting[name="position"]').val().toLowerCase(),d=parseInt(t.$viewportLayer.css("left"),10),l=parseInt(t.$viewportLayer.css("top"),10),c=parseInt(t.$viewportLayer.css("width"),10),p=parseInt(t.$viewportLayer.css("height"),10),h=t.$editor.find(".viewport-layers").width(),u=t.$editor.find(".viewport-layers").height();if(i=-1!==n.indexOf("right")?"right":-1!==n.indexOf("left")?"left":"center",a=-1!==n.indexOf("bottom")?"bottom":-1!==n.indexOf("top")?"top":"center","left"===i)t.$layerSettings.find('.setting[name="horizontal"]').val(d);else if("right"===i){var f=h-d-c;t.$layerSettings.find('.setting[name="horizontal"]').val(f),t.$viewportLayer.css({left:"auto",right:f})}else{var g=-(h-2*d-c);t.$layerSettings.find('.setting[name="horizontal"]').val(g),t.$viewportLayer.css({left:g,right:0})}if("top"===a)t.$layerSettings.find('.setting[name="vertical"]').val(l);else if("bottom"===a){var v=u-l-p;t.$layerSettings.find('.setting[name="vertical"]').val(v),t.$viewportLayer.css({top:"auto",bottom:v})}else{var m=-(u-2*l-p);t.$layerSettings.find('.setting[name="vertical"]').val(m),t.$viewportLayer.css({top:m,bottom:0})}}})},initListLayer:function(){var e=this,i=!1;this.$listLayer.on("click",function(t){e.trigger({type:"select",id:e.id})}),this.$listLayer.on("dblclick",function(a){if(!0!==i){i=!0;var n=e.$listLayer.text(),s=t('<input type="text" value="'+n+'" />').appendTo(e.$listLayer);s.on("change",function(){i=!1;var t=""!==s.val()?s.val():"Layer "+e.id;e.$listLayer.text(t),s.remove()})}}),this.$listLayer.on("selectstart",function(t){t.preventDefault()}),this.$editor.on("click.layer"+this.id,function(a){if(!t(a.target).is("input")&&!0===i){i=!1;var n=e.$listLayer.find("input"),s=""!==n.val()?n.val():"Layer "+e.id;e.$listLayer.text(s),n.remove()}})},initLayerContent:function(){},initLayerSettings:function(){var t=this;this.$layerSettings.find('select[name="preset_styles"]').multiCheck({width:120}),this.$layerSettings.find('.setting[name="position"], .setting[name="horizontal"], .setting[name="vertical"], .setting[name="width"], .setting[name="height"]').on("change",function(){var e,i,a,n=t.$layerSettings.find('.setting[name="position"]').val().toLowerCase(),s=t.$layerSettings.find('.setting[name="horizontal"]').val(),o=t.$layerSettings.find('.setting[name="vertical"]').val(),r=t.$layerSettings.find('.setting[name="width"]').val(),d=t.$layerSettings.find('.setting[name="height"]').val(),l=parseInt(t.$viewportLayer.css("width"),10),c=parseInt(t.$viewportLayer.css("height"),10);e=-1!==n.indexOf("right")?"right":-1!==n.indexOf("left")?"left":"center",i=-1!==n.indexOf("bottom")?"bottom":-1!==n.indexOf("top")?"top":"center",t.$viewportLayer.css({width:r,height:d,top:"auto",bottom:"auto",left:"auto",right:"auto"}),a=-1===s.indexOf("px")&&-1===s.indexOf("%")?"px":"","center"===e?t.$viewportLayer.css({width:l,marginLeft:"auto",marginRight:"auto",left:s+a,right:0}):t.$viewportLayer.css(e,s+a),a=-1===o.indexOf("px")&&-1===o.indexOf("%")?"px":"","center"===i?t.$viewportLayer.css({height:c,marginTop:"auto",marginBottom:"auto",top:o+a,bottom:0}):t.$viewportLayer.css(i,o+a)}),this.$layerSettings.find('.setting[name="preset_styles"], .setting[name="custom_class"]').on("change",function(){var e="",i=t.$layerSettings.find('.setting[name="preset_styles"]').val(),a=t.$layerSettings.find('.setting[name="custom_class"]').val();e+=null!==i?" "+i.join(" "):"",e+=""!==a?" "+a:"",t.$viewportLayer.hasClass("sp-layer")?t.$viewportLayer.attr("class","viewport-layer sp-layer"+e):t.$viewportLayer.find(".sp-layer").attr("class","sp-layer"+e)})}};var p=function(t){c.call(this,t)};p.prototype=Object.create(c.prototype),p.prototype.constructor=p,p.prototype.initLayerContent=function(){var e=this;this.text="new"===this.data.createMode?this.$layerSettings.find('textarea[name="text"]').val():this.data.text,this.$layerSettings.find('textarea[name="text"]').on("input",function(){e.text=t(this).val(),e.$viewportLayer.html(e.text)})},p.prototype.initViewportLayer=function(){this.$viewportLayer=t('<p class="viewport-layer sp-layer">'+this.text+"</p>"),c.prototype.initViewportLayer.call(this)},p.prototype.getData=function(){var t=c.prototype.getData.call(this);return t.type="paragraph",t.text=this.text,t},p.prototype.destroy=function(){this.$layerSettings.find('textarea[name="text"]').off("input"),c.prototype.destroy.call(this)};var h=function(t){c.call(this,t)};h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.prototype.initLayerContent=function(){var e=this;this.headingType="new"===this.data.createMode?"h3":this.data.heading_type,this.headingText="new"===this.data.createMode?this.$layerSettings.find('textarea[name="text"]').val():this.data.text,this.$layerSettings.find('select[name="heading_type"]').on("change",function(){e.headingType=t(this).val();var i=e.$viewportLayer.find(".sp-layer").attr("class");e.$viewportLayer.html("<"+e.headingType+' class="'+i+'">'+e.headingText+"</"+e.headingType+">")}),this.$layerSettings.find('textarea[name="text"]').on("input",function(){e.headingText=t(this).val(),e.$viewportLayer.find(".sp-layer").html(e.headingText)})},h.prototype.initViewportLayer=function(){this.$viewportLayer=t('<div class="viewport-layer"><'+this.headingType+' class="sp-layer">'+this.headingText+"</"+this.headingType+"></div>"),c.prototype.initViewportLayer.call(this)},h.prototype.getData=function(){var t=c.prototype.getData.call(this);return t.type="heading",t.heading_type=this.headingType,t.text=this.headingText,t},h.prototype.destroy=function(){this.$layerSettings.find('select[name="heading_type"]').off("change"),this.$layerSettings.find('textarea[name="text"]').off("input"),c.prototype.destroy.call(this)};var u=function(t){c.call(this,t)};u.prototype=Object.create(c.prototype),u.prototype.constructor=u,u.prototype.initLayerContent=function(){var e=this,i=sp_js_vars.plugin+"/admin/assets/css/images/image-placeholder.png";this.imageSource="new"===this.data.createMode?i:this.data.image_source,this.hasPlaceholder="new"===this.data.createMode,this.$layerSettings.find('input[name="image_source"]').on("change",function(){e.imageSource=t(this).val(),""!==e.imageSource?(e.$viewportLayer.attr("src",e.imageSource).removeClass("has-placeholder"),e.hasPlaceholder=!1):(e.$viewportLayer.attr("src",i).addClass("has-placeholder"),e.hasPlaceholder=!0)}),this.$layerSettings.find(".layer-image-loader").on("click",function(i){var a="image_source"===t(i.target).siblings("input").attr("name")?"default":"retina";m.open(function(t){var i=t[0];"default"===a?(e.$layerSettings.find('input[name="image_source"]').val(i.url).trigger("change"),e.$layerSettings.find('input[name="image_alt"]').val(i.alt)):"retina"===a&&e.$layerSettings.find('input[name="image_retina"]').val(i.url)})})},u.prototype.initLayerSettings=function(){c.prototype.initLayerSettings.call(this);var t=this;this.$layerSettings.find('.setting[name="preset_styles"], .setting[name="custom_class"]').on("change",function(){!0===t.hasPlaceholder?t.$viewportLayer.addClass("has-placeholder"):t.$viewportLayer.removeClass("has-placeholder")})},u.prototype.initViewportLayer=function(){this.$viewportLayer=t('<img class="viewport-layer sp-layer" src="'+this.imageSource+'" />'),!0===this.hasPlaceholder?this.$viewportLayer.addClass("has-placeholder"):this.$viewportLayer.removeClass("has-placeholder"),c.prototype.initViewportLayer.call(this)},u.prototype.getData=function(){var t=c.prototype.getData.call(this);return t.type="image",t.image_source=this.imageSource,t.image_alt=this.$layerSettings.find('input[name="image_alt"]').val(),t.image_link=this.$layerSettings.find('input[name="image_link"]').val(),t.image_retina=this.$layerSettings.find('input[name="image_retina"]').val(),t},u.prototype.destroy=function(){this.$layerSettings.find('input[name="image_source"]').off("change"),this.$layerSettings.find(".layer-image-loader").off("click"),c.prototype.destroy.call(this)};var f=function(t){c.call(this,t);var e=this;this.on("select",function(){setTimeout(function(){e.$layerSettings.find(".div-layer-html-code").codeEditor("refresh")},1)}),this.$layerSettings.find(".layer-settings-tab-label").on("click",function(){setTimeout(function(){e.$layerSettings.find(".div-layer-html-code").codeEditor("refresh")},1)})};f.prototype=Object.create(c.prototype),f.prototype.constructor=f,f.prototype.initLayerContent=function(){var t=this;this.text="new"===this.data.createMode?this.$layerSettings.find('textarea[name="text"]').val():this.data.text,t.$layerSettings.find(".div-layer-html-code").codeEditor().on("edit",function(e){t.text=e.value,t.$viewportLayer.html(t.text)})},f.prototype.initViewportLayer=function(){this.$viewportLayer=t('<div class="viewport-layer sp-layer">'+this.text+"</div>"),c.prototype.initViewportLayer.call(this)},f.prototype.getData=function(){var t=c.prototype.getData.call(this);return t.type="div",t.text=this.text,t},f.prototype.destroy=function(){this.$layerSettings.find('textarea[name="text"]').off("input"),this.$layerSettings.find(".div-layer-html-code").codeEditor("destroy"),c.prototype.destroy.call(this)};var g=function(t){c.call(this,t)};g.prototype=Object.create(c.prototype),g.prototype.constructor=g,g.prototype.initLayerContent=function(){var e=this;this.$layerSettings.find(".layer-image-loader").on("click",function(i){var a="video_poster"===t(i.target).siblings("input").attr("name")?"default":"retina";m.open(function(t){var i=t[0];"default"===a?e.$layerSettings.find('input[name="video_poster"]').val(i.url).trigger("change"):"retina"===a&&e.$layerSettings.find('input[name="video_retina_poster"]').val(i.url)})})},g.prototype.initViewportLayer=function(){var e=this;this.$viewportLayer=t('<div class="viewport-layer sp-layer has-placeholder"><span class="video-placeholder"></span></div>'),c.prototype.initViewportLayer.call(this),this.$layerSettings.find('input[name="width"], input[name="height"]').on("change",function(){var t=e.$layerSettings.find('input[name="width"]').val(),i=e.$layerSettings.find('input[name="height"]').val();"auto"===t&&e.$viewportLayer.css("width",300),"auto"===i&&e.$viewportLayer.css("height",150)}),this.$layerSettings.find('input[name="width"], input[name="height"]').trigger("change")},g.prototype.initLayerSettings=function(){c.prototype.initLayerSettings.call(this);var t=this;this.$layerSettings.find('.setting[name="preset_styles"], .setting[name="custom_class"]').on("change",function(){t.$viewportLayer.addClass("has-placeholder")})},g.prototype.getData=function(){var t=c.prototype.getData.call(this);return t.type="video",t.video_source=this.$layerSettings.find('select[name="video_source"]').val(),t.video_id=this.$layerSettings.find('input[name="video_id"]').val(),t.video_poster=this.$layerSettings.find('input[name="video_poster"]').val(),t.video_retina_poster=this.$layerSettings.find('input[name="video_retina_poster"]').val(),t.video_load_mode=this.$layerSettings.find('select[name="video_load_mode"]').val(),t.video_params=this.$layerSettings.find('input[name="video_params"]').val(),t},g.prototype.destroy=function(){this.$layerSettings.find('input[name="width"]').off("change"),this.$layerSettings.find('input[name="height"]').off("change"),c.prototype.destroy.call(this)};var v={editor:null,currentSlide:null,needsPreviewUpdate:!1,open:function(i){this.currentSlide=e.getSlide(i);var a=this,n=this.currentSlide.getData("settings"),s=t('.slide[data-id="'+i+'"]').find(".slide-spinner").css({display:"inline-block",visibility:"visible"});t.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_load_settings_editor",data:JSON.stringify(n)},complete:function(e){t("body").append(e.responseText),a.init(),s.css({display:"",visibility:""})}})},init:function(){var e=this;this.$editor=t(".settings-editor"),this.$editor.find(".close, .close-x").on("click",function(t){t.preventDefault(),e.save(),e.close()}),this.$editor.find('.slide-setting[name="content_type"]').on("change",function(){var i=t(this).val();e.loadControls(i),e.needsPreviewUpdate=!0}),"posts"===this.$editor.find('.slide-setting[name="content_type"]').val()&&this.handlePostsSelects(),t(window).on("resize.settingsEditor",function(){e.$editor.find(".modal-window").outerWidth()>=t(window).width()?e.$editor.addClass("modal-window-left"):e.$editor.removeClass("modal-window-left"),e.$editor.find(".modal-window").outerHeight()>=t(window).height()-60?e.$editor.addClass("modal-window-top"):e.$editor.removeClass("modal-window-top")}),this.$editor.on("click",".show-hide-info",function(){t(window).trigger("resize")}),t(window).trigger("resize")},loadControls:function(e){var i=this,a=this.currentSlide.getData("settings");this.$editor.find(".content-type-settings").empty(),t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_load_content_type_settings",type:e,data:JSON.stringify(a)},complete:function(a){t(".content-type-settings").append(a.responseText),"posts"===e&&i.handlePostsSelects()}})},handlePostsSelects:function(){var i=this.$editor.find('select[name="posts_post_types"]'),a=this.$editor.find('select[name="posts_taxonomies"]'),n=a.val()||[];i.on("change",function(){var i=t(this).val();a.empty(),null!==i?e.getTaxonomies(i,function(e){t.each(i,function(i,s){var o=e[s];t.each(o,function(e,i){var s=t('<optgroup label="'+i.label+'"></optgroup>').appendTo(a);t.each(i.terms,function(e,i){var a=-1!==t.inArray(i.full,n)?' selected="selected"':"";t('<option value="'+i.full+'"'+a+">"+i.name+"</option>").appendTo(s)})})}),a.multiCheck("refresh")}):a.multiCheck("refresh")}),a.on("change",function(e){a.find("option").each(function(){var e=t(this),i=e.attr("value"),a=t.inArray(i,n);!0===e.is(":selected")&&-1===a?n.push(i):!1===e.is(":selected")&&-1!==a&&n.splice(a,1)})}),i.multiCheck({width:215}),a.multiCheck({width:215})},save:function(){var e={};this.$editor.find(".slide-setting").each(function(){var i=t(this);void 0!==i.attr("multiple")?e[i.attr("name")]=null!==i.val()?i.val():[]:"checkbox"===i.attr("type")?e[i.attr("name")]=i.is(":checked"):e[i.attr("name")]=i.val()}),this.currentSlide.setData("settings",e),!0===this.needsPreviewUpdate&&(this.currentSlide.updateSlidePreview(),this.needsPreviewUpdate=!1)},close:function(){this.$editor.find(".close-x").off("click"),this.$editor.find('select[name="posts_post_types"]').multiCheck("destroy"),this.$editor.find('select[name="posts_taxonomies"]').multiCheck("destroy"),this.$editor.find('select[name="content_type"]').off("change"),this.$editor.find('select[name="posts_post_types"]').off("change"),this.$editor.find('select[name="posts_taxonomies"]').off("change"),t(window).off("resize.settingsEditor"),t("body").find(".modal-overlay, .modal-window-container").remove()}},m={open:function(t){var e=[],i=wp.media.editor.insert;wp.media.editor.send.attachment=function(t,i){var a=void 0!==i.sizes[t.size]?i.sizes[t.size]:i.sizes.full,n=i.id,s=a.url,o=a.width,r=a.height,d=i.alt,l=i.title;e.push({id:n,url:s,alt:d,title:l,width:o,height:r})},wp.media.editor.insert=function(a){t.call(this,e),wp.media.editor.insert=i},wp.media.editor.open("media-loader")}},y={previewWindow:null,slider:null,sliderData:null,open:function(e){var i=this,a=t(".preview-spinner").css({display:"inline-block",visibility:"visible"});t("body").append('<div class="modal-overlay"></div><div class="modal-window-container preview-window">\t<div class="modal-window">\t\t<span class="close-x"></span>\t</div></div>'),this.sliderData=e,this.init(),t.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_preview_slider",data:JSON.stringify(e)},complete:function(e){i.previewWindow.append(e.responseText),i.slider=i.previewWindow.find(".slider-pro"),i.previewWindow.css("visibility",""),a.css({display:"",visibility:""}),setTimeout(function(){t(window).trigger("resize")},100)}})},init:function(){var e=this;this.previewWindow=t(".preview-window .modal-window"),this.previewWindow.find(".close-x").on("click",function(t){e.close()}),this.previewWindow.css("visibility","hidden");var i=this.sliderData.settings.width,a=this.sliderData.settings.height,n=this.sliderData.settings.visible_size,s=this.sliderData.settings.force_size,o=this.sliderData.settings.orientation,r=this.sliderData.settings.auto_thumbnail_images,d="top"===this.sliderData.settings.thumbnails_position||"bottom"===this.sliderData.settings.thumbnails_position?"horizontal":"vertical";t.each(this.sliderData.slides,function(t,e){(void 0!==e.thumbnail_source&&""!==e.thumbnail_source||void 0!==e.thumbnail_content&&""!==e.thumbnail_content)&&(r=!0)}),"auto"!==n&&("horizontal"===o?i=n:"vertical"===o&&(a=n)),"fullWidth"===s?i="100%":"fullWindow"===s&&(i="100%",a="100%");var l=-1!==i.toString().indexOf("%"),c=-1!==a.toString().indexOf("%");!1===l&&!0===r&&"vertical"===d&&(i=parseInt(i,10)+parseInt(this.sliderData.settings.thumbnail_width,10)),t(window).on("resize.sliderPro",function(){!0===l?e.previewWindow.css("width",t(window).width()*(parseInt(i,10)/100)-60):i>=t(window).width()-60?e.previewWindow.css("width",t(window).width()-60):e.previewWindow.css("width",i),!0===c&&e.previewWindow.css("height",t(window).height()*(parseInt(a,10)/100)),e.previewWindow.outerWidth()>=t(window).width()?e.previewWindow.parent().addClass("modal-window-left"):e.previewWindow.parent().removeClass("modal-window-left"),e.previewWindow.outerHeight()>=t(window).height()-60?e.previewWindow.parent().addClass("modal-window-top"):e.previewWindow.parent().removeClass("modal-window-top")}),t(window).trigger("resize")},close:function(){this.previewWindow.find(".close-x").off("click"),t(window).off("resize.sliderPro"),this.slider.sliderPro("destroy"),t("body").find(".modal-overlay, .modal-window-container").remove()}};t(document).ready(function(){e.init()}),window.sliderpro=window.sliderpro||{},window.sliderpro.admin=e,window.sliderpro.preview=y}(jQuery),function(t){var e=function(e,i){this.options=i,this.isOpened=!1,this.$select=t(e),this.$multiCheck=null,this.$multiCheckHeader=null,this.$multiCheckContent=null,this.uid=(new Date).valueOf()*Math.random(),this.counter=0,this.init()};e.prototype={init:function(){var e=this;this.settings=t.extend({},this.defaults,this.options),this.$multiCheck=t('<div class="multi-check"></div>').css("width",this.settings.width),this.$multiCheckHeader=t('<button type="button" class="multi-check-header"><span class="multi-check-header-text"></span><span class="multi-check-header-arrow">▼</span></button>').appendTo(this.$multiCheck),this.$multiCheckContent=t('<ul class="multi-check-content"></ul>').appendTo(this.$multiCheck),this.$multiCheckHeader.on("mousedown.multiCheck",function(t){!1===e.isOpened?e.open():!0===e.isOpened&&e.close()}),t(document).on("mousedown.multiCheck."+this.uid,function(i){!1===t.contains(e.$multiCheck[0],i.target)&&e.close()}),this.refresh(),this.$select.after(this.$multiCheck),this.$select.hide(),this.$multiCheckContent.hide()},refresh:function(){var e=this;this.counter=0,this.$multiCheckContent.find(".single-check").off("change.multiCheck"),this.$multiCheckContent.empty(),this.$select.children().each(function(){t(this).is("optgroup")?(t('<li class="group-label">'+t(this).attr("label")+"</li>").appendTo(e.$multiCheckContent),t(this).children().each(function(){e._optionToCheckbox(t(this))})):e._optionToCheckbox(t(this))}),this.$multiCheckContent.find(".single-check").on("change.multiCheck",function(){t(this).is(":checked")?t(this).data("option").prop("selected",!0):t(this).data("option").prop("selected",!1),e.$select.trigger("change"),e._updateHeader()}),this._updateHeader()},_optionToCheckbox:function(e){var i=t('<li class="single-check-container"></li>').appendTo(this.$multiCheckContent),a=t('<input id="single-check-'+this.uid+"-"+this.counter+'" class="single-check" type="checkbox" value="'+e.attr("value")+'"'+(e.is(":selected")?' checked="checked"':"")+" />").appendTo(i);t('<label for="single-check-'+this.uid+"-"+this.counter+'">'+e.text()+"</label>").appendTo(i);a.data("option",e),this.counter++},_updateHeader:function(){var e=this.$multiCheckHeader.find(".multi-check-header-text"),i="",a=0;this.$multiCheckContent.find(".single-check").each(function(){t(this).is(":checked")&&(""!==i&&(i+=", "),i+=t(this).siblings("label").text(),a++)}),0===a?i="Click to select":a>=2&&(i=a+" selected"),e.text(i)},open:function(){this.isOpened=!0,this.$multiCheckContent.show()},close:function(){this.isOpened=!1,this.$multiCheckContent.hide()},destroy:function(){this.$select.removeData("multiCheck"),this.$multiCheckHeader.off("mousedown.multiCheck"),t(document).off("mousedown.multiCheck."+this.uid),this.$multiCheckContent.find(".single-check").off("change.multiCheck"),this.$multiCheck.remove(),this.$select.show()},defaults:{width:200}},t.fn.multiCheck=function(i){var a=Array.prototype.slice.call(arguments,1);return this.each(function(){if(void 0===t(this).data("multiCheck")){var n=new e(this,i);t(this).data("multiCheck",n)}else if(void 0!==i){var s=t(this).data("multiCheck");"function"==typeof s[i]?s[i].apply(s,a):t.error(i+" does not exist in multiCheck.")}})}}(jQuery),function(t){var e=function(e,i){this.options=i,this.$container=t(e),this.$selectedChild=null,this.$placeholder=null,this.currentMouseX=0,this.currentMouseY=0,this.slideInitialX=0,this.slideInitialY=0,this.initialMouseX=0,this.initialMouseY=0,this.isDragging=!1,this.checkHover=0,this.uid=(new Date).valueOf(),this.events=t({}),this.startPosition=0,this.endPosition=0,this.init()};e.prototype={init:function(){this.settings=t.extend({},this.defaults,this.options),this.$container.on("mousedown.lightSortable"+this.uid,t.proxy(this._onDragStart,this)),t(document).on("mousemove.lightSortable."+this.uid,t.proxy(this._onDragging,this)),t(document).on("mouseup.lightSortable."+this.uid,t.proxy(this._onDragEnd,this))},_onDragStart:function(e){1!==e.which||t(e.target).is("select")||t(e.target).is("input")||t(e.target).is("a")||(this.$selectedChild=t(e.target).is(this.settings.children)?t(e.target):t(e.target).parents(this.settings.children),1===this.$selectedChild.length&&(this.initialMouseX=e.pageX,this.initialMouseY=e.pageY,this.slideInitialX=this.$selectedChild.position().left,this.slideInitialY=this.$selectedChild.position().top,this.startPosition=this.$selectedChild.index(),e.preventDefault()))},_onDragging:function(e){if(null!==this.$selectedChild&&0!==this.$selectedChild.length){if(e.preventDefault(),this.currentMouseX=e.pageX,this.currentMouseY=e.pageY,!this.isDragging){this.isDragging=!0,this.trigger({type:"sortStart"}),t.isFunction(this.settings.sortStart)&&this.settings.sortStart.call(this,{type:"sortStart"});var i=this.$container.is("ul")||this.$container.is("ol")?"li":"div";this.$placeholder=t("<"+i+">").addClass("ls-ignore "+this.settings.placeholder).insertAfter(this.$selectedChild),0===this.$placeholder.width()&&this.$placeholder.css("width",this.$selectedChild.outerWidth()),0===this.$placeholder.height()&&this.$placeholder.css("height",this.$selectedChild.outerHeight()),this.$selectedChild.css({"pointer-events":"none",position:"absolute",left:this.$selectedChild.position().left,top:this.$selectedChild.position().top,width:this.$selectedChild.width(),height:this.$selectedChild.height()}).addClass("ls-ignore"),this.$container.append(this.$selectedChild),t("body").css("user-select","none");var a=this;this.checkHover=setInterval(function(){a.$container.find(a.settings.children).not(".ls-ignore").each(function(){var e=t(this);a.currentMouseX>e.offset().left&&a.currentMouseX<e.offset().left+e.width()&&a.currentMouseY>e.offset().top&&a.currentMouseY<e.offset().top+e.height()&&(e.index()>=a.$placeholder.index()?a.$placeholder.insertAfter(e):a.$placeholder.insertBefore(e))})},200)}this.$selectedChild.css({left:this.currentMouseX-this.initialMouseX+this.slideInitialX,top:this.currentMouseY-this.initialMouseY+this.slideInitialY})}},_onDragEnd:function(){this.isDragging&&(this.isDragging=!1,t("body").css("user-select",""),this.$selectedChild.css({position:"",left:"",top:"",width:"",height:"","pointer-events":""}).removeClass("ls-ignore").insertAfter(this.$placeholder),this.$placeholder.remove(),clearInterval(this.checkHover),this.endPosition=this.$selectedChild.index(),this.trigger({type:"sortEnd"}),t.isFunction(this.settings.sortEnd)&&this.settings.sortEnd.call(this,{type:"sortEnd",startPosition:this.startPosition,endPosition:this.endPosition})),this.$selectedChild=null},destroy:function(){this.$container.removeData("lightSortable"),this.isDragging&&this._onDragEnd(),this.$container.off("mousedown.lightSortable."+this.uid),t(document).off("mousemove.lightSortable."+this.uid),t(document).off("mouseup.lightSortable."+this.uid)},on:function(t,e){return this.events.on(t,e)},off:function(t){return this.events.off(t)},trigger:function(t){return this.events.triggerHandler(t)},defaults:{placeholder:"",sortStart:function(){},sortEnd:function(){}}},t.fn.lightSortable=function(i){var a=Array.prototype.slice.call(arguments,1);return this.each(function(){if(void 0===t(this).data("lightSortable")){var n=new e(this,i);t(this).data("lightSortable",n)}else if(void 0!==i){var s=t(this).data("lightSortable");"function"==typeof s[i]?s[i].apply(s,a):t.error(i+" does not exist in lightSortable.")}})}}(jQuery),function(t){t.lightURLParse=function(e){var i=e.split("?")[1].split("&"),a=[];return t.each(i,function(t,e){var i=e.split("=");a[i[0]]=i[1]}),a}}(jQuery),function(t){var e=function(e,i={}){this.options=i,this.$textarea=t(e),this.isCodeMirror=!1,this.codeMirror=null,this.init()};e.prototype={init:function(){var e=this;if(this.settings=t.extend({},this.defaults,this.options),void 0!==wp.codeEditor.initialize){var i=wp.codeEditor.initialize(this.$textarea,this.setting);this.codeMirror=i.codemirror,this.isCodeMirror=!0,this.codeMirror.on("change",function(){e.trigger({type:"edit",value:e.codeMirror.getValue()})})}else this.$textarea.on("input",function(){e.trigger({type:"edit",value:e.$textarea.val()})})},getValue:function(){return!0===this.isCodeMirror?this.codeMirror.getValue():this.$textarea.val()},on:function(t,e){return this.$textarea.on(t,e)},off:function(t){return this.$textarea.off(t)},trigger:function(t){return this.$textarea.triggerHandler(t)},refresh:function(){!0===this.isCodeMirror&&this.codeMirror.refresh()},destroy:function(){this.$textarea.removeData("codeEditor"),!0===this.isCodeMirror?(this.codeMirror.toTextArea(),this.codeMirror.off("change")):this.$textarea.off("input")},defaults:{}},t.fn.codeEditor=function(i){var a=Array.prototype.slice.call(arguments,1);return this.each(function(){if(void 0===t(this).data("codeEditor")){var n=new e(this,i);t(this).data("codeEditor",n)}else if(void 0!==i){var s=t(this).data("codeEditor");"function"==typeof s[i]?s[i].apply(s,a):t.error(i+" does not exist in codeEditor.")}})}}(jQuery);