(function(c){var k={slides:[],slideCounter:0,postsData:{},allowSlideImageResize:!0,init:function(){"single"===sp_js_vars.page?this.initSingleSliderPage():"all"===sp_js_vars.page&&this.initAllSlidersPage()},initSingleSliderPage:function(){var a=this;this.initSlides();-1!==parseInt(sp_js_vars.id,10)&&this.loadSliderData(function(){a.checkSlideImageSize()});c("form").on("submit",function(b){b.preventDefault();a.saveSlider();a.checkSlideImageSize()});c(".preview-slider").on("click",function(b){b.preventDefault();
a.previewSlider()});c(".update-presets").on("click",function(b){b.preventDefault();a.updatePresets(c(this))});c(".slider-setting-presets").on("change",function(b){b.preventDefault();a.updateSettings(c(this).val())});c('.add-slide, .slide-type a[data-type="empty"]').on("click",function(b){b.preventDefault();a.addEmptySlide()});c('.slide-type a[data-type="image"]').on("click",function(b){b.preventDefault();a.addImageSlides()});c('.slide-type a[data-type="posts"]').on("click",function(b){b.preventDefault();
a.addPostsSlides()});c('.slide-type a[data-type="gallery"]').on("click",function(b){b.preventDefault();a.addGallerySlides()});c('.slide-type a[data-type="flickr"]').on("click",function(b){b.preventDefault();a.addFlickrSlides()});c(".add-breakpoint").on("click",function(b){b.preventDefault();a.addBreakpoint()});c(".breakpoints").on("click",".breakpoint-setting-name a",function(b){b.preventDefault();b=c(this).attr("data-type");var d=c(this).parents(".breakpoint").find(".breakpoint-settings");a.addBreakpointSetting(b,
d)});c(".breakpoints").on("click",".remove-breakpoint",function(a){c(this).parents(".breakpoint").remove()});c(".breakpoints").on("click",".remove-breakpoint-setting",function(a){c(this).parents("tr").remove()});c(".breakpoints").lightSortable({children:".breakpoint",placeholder:""});c(".postbox .hndle, .postbox .handlediv").on("click",function(){var a=c(this).parent(".postbox");!0===a.hasClass("closed")?a.removeClass("closed"):a.addClass("closed")});c(".sidebar-settings").on("mouseover","label",
function(){a.showInfo(c(this))});c(".image-size-warning-close").click(function(a){a.preventDefault();c(".image-size-warning").remove();c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_close_image_size_warning"}})});c(window).resize(function(){!0===a.allowSlideImageResize&&(a.resizeSlideImages(),a.allowSlideImageResize=!1,setTimeout(function(){a.resizeSlideImages();a.allowSlideImageResize=!0},250))})},initAllSlidersPage:function(){var a=this;c(".sliders-list").on("click",".preview-slider",
function(b){b.preventDefault();a.previewSliderAll(c(this))});c(".sliders-list").on("click",".delete-slider",function(b){b.preventDefault();a.deleteSlider(c(this))});c(".sliders-list").on("click",".duplicate-slider",function(b){b.preventDefault();a.duplicateSlider(c(this))});c(".sliders-list").on("click",".export-slider",function(b){b.preventDefault();a.exportSlider(c(this))});c(".import-slider").on("click",function(a){a.preventDefault();g.open()});c(".clear-all-cache").on("click",function(a){a.preventDefault();
c(".clear-cache-spinner").css({display:"inline-block",visibility:"visible"});a=c(this).attr("data-nonce");c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_clear_all_cache",nonce:a},complete:function(a){c(".clear-cache-spinner").css({display:"",visibility:""})}})});c(".getting-started-close").click(function(a){a.preventDefault();c(".getting-started-info").hide();c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_close_getting_started"}})})},loadSliderData:function(a){var b=
this;c(".slide-spinner").css({display:"inline-block",visibility:"visible"});c.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_get_slider_data",id:sp_js_vars.id,nonce:sp_js_vars.lad_nonce},complete:function(d){d=c.parseJSON(d.responseText);c.each(d.slides,function(a,d){var e={mainImage:{},thumbnail:{},caption:d.caption,layers:d.layers,html:d.html,settings:c.isArray(d.settings)?{}:d.settings};c.each(d,function(a,b){-1!==a.indexOf("main_image")?e.mainImage[a]=b:-1!==a.indexOf("thumbnail")&&
(e.thumbnail[a]=b)});b.getSlide(a).setData("all",e)});c(".slide-spinner").css({display:"",visibility:""});a()}})},saveSlider:function(){var a=this.getSliderData();a.nonce=sp_js_vars.sa_nonce;a.action="save";a=JSON.stringify(a);var b=c(".update-spinner").css({display:"inline-block",visibility:"visible"});c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_save_slider",data:a},complete:function(a){b.css({display:"",visibility:""});-1===parseInt(sp_js_vars.id,10)&&!1===isNaN(a.responseText)?
(c("h2").after('<div class="updated"><p>'+sp_js_vars.slider_create+"</p></div>"),window.location=sp_js_vars.admin+"?page=sliderpro&id="+a.responseText+"&action=edit"):0===c(".updated").length&&c("h2").after('<div class="updated"><p>'+sp_js_vars.slider_update+"</p></div>")}})},getSliderData:function(){var a=this,b={id:sp_js_vars.id,name:c("input#title").val(),settings:{},slides:[],panels_state:{}},d=[];c(".slides-container").find(".slide").each(function(d){var e=c(this),n=a.getSlide(parseInt(e.attr("data-id"),
10)).getData("all");n.position=parseInt(e.attr("data-position"),10);b.slides[d]=n});c(".sidebar-settings").find(".setting").each(function(){var a=c(this);b.settings[a.attr("name")]="checkbox"===a.attr("type")?a.is(":checked"):a.val()});c(".breakpoints").find(".breakpoint").each(function(){var a=c(this),b={breakpoint_width:a.find('input[name="breakpoint_width"]').val()};a.find(".breakpoint-setting").each(function(){var a=c(this);b[a.attr("name")]="checkbox"===a.attr("type")?a.is(":checked"):a.val()});
d.push(b)});0<d.length&&(b.settings.breakpoints=d);c(".sidebar-settings").find(".postbox").each(function(){var a=c(this);b.panels_state[a.attr("data-name")]=a.hasClass("closed")?"closed":""});return b},previewSlider:function(){x.open(this.getSliderData())},previewSliderAll:function(a){var b=c.lightURLParse(a.attr("href"));a=b.lad_nonce;b=parseInt(b.id,10);c.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_get_slider_data",id:b,nonce:a},complete:function(a){a=c.parseJSON(a.responseText);
x.open(a)}})},updatePresets:function(a){a=c.lightURLParse(a.attr("href"));var b=a.method,d=a.up_nonce,e;a=c(".slider-setting-presets").val();if("update"!==b&&"delete"!==b||null!==a)"save-new"===b?e=c('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window save-new-preset-dialog">\t\t<label>'+sp_js_vars.preset_name+'</label><input type="text" value="" class="preset-name">\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+sp_js_vars.save+
'</a>\t\t\t<a class="button dialog-cancel" href="#">'+sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body"):"update"===b?e=c('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window delete-preset-dialog">\t\t<p>'+sp_js_vars.preset_update+'</p>\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+sp_js_vars.yes+'</a>\t\t\t<a class="button dialog-cancel" href="#">'+sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body"):
"delete"===b&&(e=c('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window delete-preset-dialog">\t\t<p>'+sp_js_vars.preset_delete+'</p>\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+sp_js_vars.yes+'</a>\t\t\t<a class="button dialog-cancel" href="#">'+sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body")),c(".modal-window-container").css("top",c(window).scrollTop()),e.find(".dialog-ok").on("click",function(a){a.preventDefault();
var m="save-new"===b?e.find(".preset-name").val():c(".slider-setting-presets").val(),f={},g=[];if("save-new"!==b||""!==m&&0===c(".slider-setting-presets").find('option[value="'+m+'"]').length)c(".sidebar-settings").find(".setting").each(function(){var a=c(this);f[a.attr("name")]="checkbox"===a.attr("type")?a.is(":checked"):a.val()}),c(".breakpoints").find(".breakpoint").each(function(){var a=c(this),b={breakpoint_width:a.find('input[name="breakpoint_width"]').val()};a.find(".breakpoint-setting").each(function(){var a=
c(this);b[a.attr("name")]="checkbox"===a.attr("type")?a.is(":checked"):a.val()});g.push(b)}),0<g.length&&(f.breakpoints=g),c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_update_presets",method:b,name:m,settings:JSON.stringify(f),nonce:d},complete:function(a){"save-new"===b?c('<option value="'+m+'">'+m+"</option>").appendTo(c(".slider-setting-presets")):"delete"===b&&c(".slider-setting-presets").find('option[value="'+m+'"]').remove()}}),e.remove()}),e.find(".dialog-cancel").one("click",
function(a){a.preventDefault();e.remove()}),e.find(".modal-overlay").one("click",function(a){e.remove()})},updateSettings:function(a){c.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_get_preset_settings",name:a},complete:function(a){a=c.parseJSON(a.responseText);c.each(a,function(a,b){var d=c(".sidebar-settings").find('.setting[name="'+a+'"]');"checkbox"===d.attr("type")?!0===b?d.attr("checked","checked"):!1===b&&d.removeAttr("checked"):d.val(b);c(".breakpoints").empty();"breakpoints"===
a&&c.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_get_breakpoints_preset",data:JSON.stringify(b)},complete:function(a){c(a.responseText).appendTo(c(".breakpoints"))}})})}})},deleteSlider:function(a){var b=c.lightURLParse(a.attr("href")),d=b.da_nonce,e=parseInt(b.id,10),m=a.parents("tr"),n=c('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window delete-slider-dialog">\t\t<p class="dialog-question">'+sp_js_vars.slider_delete+'</p>\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+
sp_js_vars.yes+'</a>\t\t\t<a class="button dialog-cancel" href="#">'+sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body");c(".modal-window-container").css("top",c(window).scrollTop());n.find(".dialog-ok").one("click",function(a){a.preventDefault();c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_delete_slider",id:e,nonce:d},complete:function(a){e===parseInt(a.responseText,10)&&m.fadeOut(300,function(){m.remove()})}});n.remove()});n.find(".dialog-cancel").one("click",
function(a){a.preventDefault();n.remove()});n.find(".modal-overlay").one("click",function(a){n.remove()})},duplicateSlider:function(a){var b=c.lightURLParse(a.attr("href"));a=b.dua_nonce;b=parseInt(b.id,10);c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_duplicate_slider",id:b,nonce:a},complete:function(a){c(a.responseText).appendTo(c(".sliders-list tbody")).hide().fadeIn()}})},exportSlider:function(a){var b=c.lightURLParse(a.attr("href"));a=b.ea_nonce;b=parseInt(b.id,10);f.open(b,
a)},initSlides:function(){var a=this;c(".slides-container").find(".slide").each(function(b){a.initSlide(c(this))});c(".slides-container").lightSortable({children:".slide",placeholder:"slide slide-placeholder",sortEnd:function(a){c(".slide").each(function(a){c(this).attr("data-position",a)})}})},initSlide:function(a,b){var c=this,e=new l(a,this.slideCounter,b);this.slides.push(e);e.on("duplicateSlide",function(a){c.duplicateSlide(a.slideData)});e.on("deleteSlide",function(a){c.deleteSlide(a.id)});
a.attr("data-id",this.slideCounter);a.attr("data-position",this.slideCounter);this.slideCounter++},getSlide:function(a){var b;c.each(this.slides,function(c,e){if(e.id===a)return b=e,!1});return b},duplicateSlide:function(a){var b=this,d=c.extend(!0,{},a);c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_add_slides",data:JSON.stringify([{settings:{content_type:d.settings.content_type},main_image_source:d.mainImage.main_image_source}])},complete:function(a){a=c(a.responseText).appendTo(c(".slides-container"));
b.initSlide(a,d)}})},deleteSlide:function(a){var b=this,d=b.getSlide(a),e=c('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window delete-slide-dialog">\t\t<p class="dialog-question">'+sp_js_vars.slide_delete+'</p>\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+sp_js_vars.yes+'</a>\t\t\t<a class="button dialog-cancel" href="#">'+sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body");c(".modal-window-container").css("top",
c(window).scrollTop());e.find(".dialog-ok").one("click",function(a){a.preventDefault();d.off("duplicateSlide");d.off("deleteSlide");d.remove();e.remove();b.slides.splice(c.inArray(d,b.slides),1)});e.find(".dialog-cancel").one("click",function(a){a.preventDefault();e.remove()});e.find(".modal-overlay").one("click",function(a){e.remove()})},addEmptySlide:function(){var a=this;c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_add_slides"},complete:function(b){b=c(b.responseText).appendTo(c(".slides-container"));
a.initSlide(b)}})},addImageSlides:function(){var a=this;v.open(function(b){var d=[];c.each(b,function(a,b){d.push({main_image_id:b.id,main_image_source:b.url,main_image_alt:b.alt,main_image_title:b.title,main_image_width:b.width,main_image_height:b.height})});c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_add_slides",data:JSON.stringify(d)},complete:function(b){var e=c(".slides-container").find(".slide").length-1;c(".slides-container").append(b.responseText).find(".slide"+(-1===
e?"":":gt("+e+")")).each(function(b){var e=c(this);a.initSlide(e,{mainImage:d[b],thumbnail:{},caption:"",layers:{},html:"",settings:{}})});k.checkSlideImageSize()}})})},addPostsSlides:function(){var a=this;c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_add_slides",data:JSON.stringify([{settings:{content_type:"posts"}}])},complete:function(b){b=c(b.responseText).appendTo(c(".slides-container"));var d=a.slideCounter;a.initSlide(b,{mainImage:{main_image_source:"[sp_image_src]",main_image_alt:"[sp_image_alt]",
main_image_link:"[sp_link_url]"},thumbnail:{},caption:"",layers:[{id:1,name:"Layer 1",type:"paragraph",text:"[sp_title]",settings:{position:"bottomLeft",horizontal:"0",vertical:"0",preset_styles:["sp-black","sp-padding"]}}],html:"",settings:{content_type:"posts"}});w.open(d)}})},addGallerySlides:function(){var a=this;c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_add_slides",data:JSON.stringify([{settings:{content_type:"gallery"}}])},complete:function(b){b=c(b.responseText).appendTo(c(".slides-container"));
var d=a.slideCounter;a.initSlide(b,{mainImage:{main_image_source:"[sp_image_src]",main_image_alt:"[sp_image_alt]"},thumbnail:{},caption:"",layers:{},html:"",settings:{content_type:"gallery"}});w.open(d)}})},addFlickrSlides:function(){var a=this;c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_add_slides",data:JSON.stringify([{settings:{content_type:"flickr"}}])},complete:function(b){b=c(b.responseText).appendTo(c(".slides-container"));var d=a.slideCounter;a.initSlide(b,{mainImage:{main_image_source:"[sp_image_src]",
main_image_link:"[sp_image_link]"},thumbnail:{},caption:"",layers:[{id:1,name:"Layer 1",type:"paragraph",text:"[sp_image_description]",settings:{position:"bottomLeft",horizontal:"0",vertical:"0",preset_styles:["sp-black","sp-padding"]}}],html:"",settings:{content_type:"flickr"}});w.open(d)}})},addBreakpoint:function(){var a="",b=c('input[name="breakpoint_width"]').last().val();"undefined"===typeof b?a="960":""!==b&&(a=b-190);c.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_add_breakpoint",
data:a},complete:function(a){c(a.responseText).appendTo(c(".breakpoints"))}})},addBreakpointSetting:function(a,b){c.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_add_breakpoint_setting",data:a},complete:function(a){c(a.responseText).appendTo(b)}})},getTaxonomies:function(a,b){var d=this,e=[];c.each(a,function(a,b){"undefined"===typeof d.postsData[b]&&e.push(b)});0!==e.length?c.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_get_taxonomies",post_names:JSON.stringify(e)},
complete:function(a){a=c.parseJSON(a.responseText);c.each(a,function(a,b){d.postsData[a]=b});b(d.postsData)}}):b(this.postsData)},showInfo:function(a){var b=a.attr("data-info"),d=null;"undefined"!==typeof b&&(d=c('<div class="info-tooltip">'+b+"</div>").appendTo(a.parent()),d.css({left:-d.outerWidth(!0),marginTop:.5*-d.outerHeight(!0)-9}));a.on("mouseout",function(){null!==d&&d.remove()})},resizeSlideImages:function(){var a=c(".slide-preview").width()/c(".slide-preview").height();c(".slide-preview > img").each(function(){var b=
c(this);b.width()/b.height()>a?b.css({width:"auto",height:"100%"}):b.css({width:"100%",height:"auto"})})},checkSlideImageSize:function(a){if(0!==c(".image-size-warning").length){var b=!1,d=c(".sidebar-settings").find('.setting[name="width"]').val(),e=c(".sidebar-settings").find('.setting[name="height"]').val();c.each(this.slides,function(a,c){var m=c.getData("mainImage");0!==parseInt(m.main_image_width,10)&&0!==parseInt(m.main_image_height,10)&&(!1===isNaN(d)&&parseInt(m.main_image_width,10)<parseInt(d,
10)||!1===isNaN(e)&&parseInt(m.main_image_height,10)<parseInt(e,10))&&(b=!0)});!0===b?c(".image-size-warning").css("display","block"):c(".image-size-warning").css("display","")}}},f={exportWindow:null,open:function(a,b){var d=this;c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_export_slider",id:a,nonce:b},complete:function(a){d.exportWindow=c(a.responseText).appendTo(c("body"));d.init()}})},init:function(){var a=this;this.exportWindow.find(".close-x").on("click",function(b){b.preventDefault();
a.close()});this.exportWindow.find("textarea").on("click",function(a){a.preventDefault();c(this).focus();c(this).select()})},close:function(){this.exportWindow.find(".close-x").off("click");this.exportWindow.find("textarea").off("click");this.exportWindow.remove()}},g={importWindow:null,open:function(){var a=this;c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_import_slider"},complete:function(b){a.importWindow=c(b.responseText).appendTo(c("body"));a.init()}})},init:function(){var a=
this;this.importWindow.find(".close-x").on("click",function(b){b.preventDefault();a.close()});this.importWindow.find(".save").on("click",function(b){b.preventDefault();a.save()})},save:function(){var a=this,b=this.importWindow.find("textarea").val();""!==b&&(b=c.parseJSON(b),b.id=-1,b.nonce=sp_js_vars.sa_nonce,b.action="import",b=JSON.stringify(b),c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_save_slider",data:b},complete:function(b){0!==c(".sliders-list .no-slider-row").length&&
c(".sliders-list .no-slider-row").remove();c(b.responseText).appendTo(c(".sliders-list tbody")).hide().fadeIn();a.close()}}))},close:function(){this.importWindow.find(".close-x").off("click");this.importWindow.find(".save").off("click");this.importWindow.remove()}},l=function(a,b,d){this.$slide=a;this.id=b;this.data=d;this.events=c({});"undefined"===typeof this.data&&(this.data={mainImage:{},thumbnail:{},caption:"",layers:{},html:"",settings:{}});this.init()};l.prototype={init:function(){var a=this;
this.$slide.find(".slide-preview").on("click",function(b){b=a.getData("settings").content_type;"undefined"!==typeof b&&"custom"!==b||v.open(function(b){b=b[0];a.setData("mainImage",{main_image_id:b.id,main_image_source:b.url,main_image_alt:b.alt,main_image_title:b.title,main_image_width:b.width,main_image_height:b.height});a.updateSlidePreview();k.checkSlideImageSize()})});this.$slide.find(".edit-main-image").on("click",function(b){b.preventDefault();y.open(a.id)});this.$slide.find(".edit-thumbnail").on("click",
function(b){b.preventDefault();z.open(a.id)});this.$slide.find(".edit-caption").on("click",function(b){b.preventDefault();A.open(a.id)});this.$slide.find(".edit-layers").on("click",function(b){b.preventDefault();B.open(a.id)});this.$slide.find(".edit-html").on("click",function(b){b.preventDefault();C.open(a.id)});this.$slide.find(".edit-settings").on("click",function(b){b.preventDefault();w.open(a.id)});this.$slide.find(".delete-slide").on("click",function(b){b.preventDefault();a.trigger({type:"deleteSlide",
id:a.id})});this.$slide.find(".duplicate-slide").on("click",function(b){b.preventDefault();a.trigger({type:"duplicateSlide",slideData:a.data})});this.resizeImage()},getData:function(a){if("all"===a){var b={};c.each(this.data.mainImage,function(a,c){b[a]=c});c.each(this.data.thumbnail,function(a,c){b[a]=c});b.caption=this.data.caption;b.layers=this.data.layers;b.html=this.data.html;b.settings=this.data.settings;return b}if("mainImage"===a)return this.data.mainImage;if("thumbnail"===a)return this.data.thumbnail;
if("caption"===a)return this.data.caption;if("layers"===a)return this.data.layers;if("html"===a)return this.data.html;if("settings"===a)return this.data.settings},setData:function(a,b){var d=this;"all"===a?this.data=b:"mainImage"===a?c.each(b,function(a,b){d.data.mainImage[a]=b}):"thumbnail"===a?c.each(b,function(a,b){d.data.thumbnail[a]=b}):"caption"===a?this.data.caption=b:"layers"===a?this.data.layers=b:"html"===a?this.data.html=b:"settings"===a&&(this.data.settings=b)},remove:function(){this.$slide.find(".slide-preview").off("click");
this.$slide.find(".edit-main-image").off("click");this.$slide.find(".edit-caption").off("click");this.$slide.find(".edit-layers").off("click");this.$slide.find(".edit-html").off("click");this.$slide.find(".edit-settings").off("click");this.$slide.find(".delete-slide").off("click");this.$slide.find(".duplicate-slide").off("click");this.$slide.fadeOut(500,function(){c(this).remove()})},updateSlidePreview:function(){var a=this.$slide.find(".slide-preview"),b=this.data.settings.content_type;a.empty();
"undefined"===typeof b||"custom"===b?(b=this.data.mainImage.main_image_source,"undefined"!==typeof b&&""!==b?(c('<img src="'+b+'" />').appendTo(a),this.resizeImage()):c('<p class="no-image">'+sp_js_vars.no_image+"</p>").appendTo(a),this.$slide.removeClass("dynamic-slide")):"posts"===b?(c("<p>[ "+sp_js_vars.posts_slides+" ]</p>").appendTo(a),this.$slide.addClass("dynamic-slide")):"gallery"===b?(c("<p>[ "+sp_js_vars.gallery_slides+" ]</p>").appendTo(a),this.$slide.addClass("dynamic-slide")):"flickr"===
b&&(c("<p>[ "+sp_js_vars.flickr_slides+" ]</p>").appendTo(a),this.$slide.addClass("dynamic-slide"))},resizeImage:function(){var a=this.$slide.find(".slide-preview"),b=this.$slide.find(".slide-preview > img");if(b.length)var c=setInterval(function(){!0===b[0].complete&&(clearInterval(c),b.width()/b.height()>a.width()/a.height()?b.css({width:"auto",height:"100%"}):b.css({width:"100%",height:"auto"}))},100)},on:function(a,b){this.events.on(a,b)},off:function(a){this.events.off(a)},trigger:function(a){this.events.triggerHandler(a)}};
var y={editor:null,currentSlide:null,needsPreviewUpdate:!1,open:function(a){this.currentSlide=k.getSlide(a);var b=this,d=this.currentSlide.getData("mainImage"),e=this.currentSlide.getData("settings").content_type,m=c('.slide[data-id="'+a+'"]').find(".slide-spinner").css({display:"inline-block",visibility:"visible"});"undefined"===typeof e&&(e="custom");c.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_load_main_image_editor",data:JSON.stringify(d),content_type:e},
complete:function(a){c("body").append(a.responseText);b.init();m.css({display:"",visibility:""})}})},init:function(){var a=this;c(".modal-window-container").css("top",c(window).scrollTop());this.$editor=c(".main-image-editor");this.$editor.find(".close-x").on("click",function(b){b.preventDefault();a.save();a.close();k.checkSlideImageSize()});this.$editor.find(".image-loader, .additional-image-loader").on("click",function(b){b.preventDefault();a.openMediaLibrary(b)});this.$editor.find(".clear-fieldset").on("click",
function(b){b.preventDefault();a.clearFieldset(b)});this.$editor.find('input[name="main_image_source"]').on("input",function(b){a.needsPreviewUpdate=!0})},openMediaLibrary:function(a){a.preventDefault();var b=this,d=this.$editor.find(".main-image .image-loader"),e=c(a.target).hasClass("additional-image-loader"),m=c(a.target).siblings("input");v.open(function(a){a=a[0];!0===e?m.val(a.url):(0!==d.find("img").length?d.find("img").attr("src",a.url):(d.find(".no-image").remove(),c('<img src="'+a.url+'" />').appendTo(d)),
b.$editor.find('input[name="main_image_id"]').val(a.id),b.$editor.find('input[name="main_image_source"]').val(a.url),b.$editor.find('input[name="main_image_alt"]').val(a.alt),b.$editor.find('input[name="main_image_title"]').val(a.title),b.$editor.find('input[name="main_image_width"]').val(a.width),b.$editor.find('input[name="main_image_height"]').val(a.height),b.needsPreviewUpdate=!0)})},clearFieldset:function(a){a.preventDefault();a=c(a.target).parents(".fieldset");var b=a.find(".image-loader");
a.find("input").val("");0!==b.find("img").length&&(b.find("img").remove(),c('<p class="no-image">'+sp_js_vars.no_image+"</p>").appendTo(b),this.needsPreviewUpdate=!0)},save:function(){var a={};this.$editor.find(".field").each(function(){var b=c(this);a[b.attr("name")]=b.val()});this.currentSlide.setData("mainImage",a);!0===this.needsPreviewUpdate&&(this.currentSlide.updateSlidePreview(),this.needsPreviewUpdate=!1)},close:function(){this.$editor.find(".close-x").off("click");this.$editor.find(".image-loader").off("click");
this.$editor.find(".additional-image-loader").off("click");this.$editor.find(".clear-fieldset").off("click");this.$editor.find('input[name="main_image_source"]').off("input");c("body").find(".modal-overlay, .modal-window-container").remove()}},z={editor:null,currentSlide:null,open:function(a){this.currentSlide=k.getSlide(a);var b=this,d=this.currentSlide.getData("thumbnail"),e=this.currentSlide.getData("settings").content_type,m=c('.slide[data-id="'+a+'"]').find(".slide-spinner").css({display:"inline-block",
visibility:"visible"});"undefined"===typeof e&&(e="custom");c.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_load_thumbnail_editor",data:JSON.stringify(d),content_type:e},complete:function(a){c("body").append(a.responseText);b.init();m.css({display:"",visibility:""})}})},init:function(){var a=this;c(".modal-window-container").css("top",c(window).scrollTop());this.$editor=c(".thumbnail-editor");this.$editor.find(".close-x").on("click",function(b){b.preventDefault();
a.save();a.close()});this.$editor.find(".image-loader, .additional-image-loader").on("click",function(b){b.preventDefault();a.openMediaLibrary(b)});this.$editor.find(".clear-fieldset").on("click",function(b){b.preventDefault();a.clearFieldset(b)})},openMediaLibrary:function(a){a.preventDefault();var b=this,d=this.$editor.find(".thumbnail .image-loader"),e=c(a.target).hasClass("additional-image-loader"),m=c(a.target).siblings("input");v.open(function(a){a=a[0];!0===e?m.val(a.url):(0!==d.find("img").length?
d.find("img").attr("src",a.url):(d.find(".no-image").remove(),c('<img src="'+a.url+'" />').appendTo(d)),b.$editor.find('input[name="thumbnail_source"]').val(a.url),b.$editor.find('input[name="thumbnail_alt"]').val(a.alt),b.$editor.find('input[name="thumbnail_title"]').val(a.title))})},clearFieldset:function(a){a.preventDefault();a=c(a.target).parents(".fieldset");var b=a.find(".image-loader");a.find("input").val("");0!==b.find("img").length&&(b.find("img").remove(),c('<p class="no-image">'+sp_js_vars.no_image+
"</p>").appendTo(b))},save:function(){var a={};this.$editor.find(".field").each(function(){var b=c(this);a[b.attr("name")]=b.val()});this.currentSlide.setData("thumbnail",a)},close:function(){this.$editor.find(".close-x").off("click");this.$editor.find(".image-loader").off("click");this.$editor.find(".additional-image-loader").off("click");this.$editor.find(".clear-fieldset").off("click");this.$editor.find('input[name="thumbnail_source"]').off("input");c("body").find(".modal-overlay, .modal-window-container").remove()}},
A={editor:null,currentSlide:null,open:function(a){this.currentSlide=k.getSlide(a);var b=this,d=this.currentSlide.getData("caption"),e=c('.slide[data-id="'+a+'"]').find(".slide-spinner").css({display:"inline-block",visibility:"visible"});a=this.currentSlide.getData("settings").content_type;c.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_load_caption_editor",data:d,content_type:a},complete:function(a){c("body").append(a.responseText);b.init();e.css({display:"",visibility:""})}})},
init:function(){var a=this;c(".modal-window-container").css("top",c(window).scrollTop());this.$editor=c(".caption-editor");this.$editor.find(".close-x").on("click",function(b){b.preventDefault();a.save();a.close()})},save:function(){this.currentSlide.setData("caption",this.$editor.find("textarea").val())},close:function(){this.$editor.find(".close-x").off("click");c("body").find(".modal-overlay, .modal-window-container").remove()}},C={editor:null,currentSlide:null,open:function(a){this.currentSlide=
k.getSlide(a);var b=this,d=this.currentSlide.getData("html"),e=c('.slide[data-id="'+a+'"]').find(".slide-spinner").css({display:"inline-block",visibility:"visible"});a=this.currentSlide.getData("settings").content_type;c.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_load_html_editor",data:d,content_type:a},complete:function(a){c("body").append(a.responseText);b.init();e.css({display:"",visibility:""})}})},init:function(){var a=this;c(".modal-window-container").css("top",
c(window).scrollTop());this.$editor=c(".html-editor");this.$editor.find(".close-x").on("click",function(b){b.preventDefault();a.save();a.close()})},save:function(){this.currentSlide.setData("html",this.$editor.find("textarea").val())},close:function(){this.$editor.find(".close-x").off("click");c("body").find(".modal-overlay, .modal-window-container").remove()}},B={editor:null,currentSlide:null,layersData:null,layers:[],counter:0,isWorking:!1,open:function(a){this.currentSlide=k.getSlide(a);this.layersData=
this.currentSlide.getData("layers");var b=this,d=c('.slide[data-id="'+a+'"]').find(".slide-spinner").css({display:"inline-block",visibility:"visible"});a=this.currentSlide.getData("settings").content_type;c.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_load_layers_editor",data:JSON.stringify(this.layersData),content_type:a},complete:function(a){c("body").append(a.responseText);b.init();d.css({display:"",visibility:""})}})},init:function(){var a=this;c(".modal-window-container").css("top",
c(window).scrollTop());this.counter=0;this.$editor=c(".layers-editor");this.$editor.find(".close-x").on("click",function(b){b.preventDefault();a.save();a.close()});this.$editor.find(".add-layer-group").on("click",function(b){b.preventDefault();if(!0!==a.isWorking){var d="paragraph";"undefined"!==typeof c(b.target).attr("data-type")&&(d=c(b.target).attr("data-type"));a.addNewLayer(d)}});this.$editor.find(".delete-layer").on("click",function(b){b.preventDefault();a.deleteLayer()});this.$editor.find(".duplicate-layer").on("click",
function(b){b.preventDefault();!0!==a.isWorking&&a.duplicateLayer()});this.initViewport();c.each(this.layersData,function(b,c){c.createMode="init";a.createLayer(c);a.counter=Math.max(a.counter,c.id)});c(".list-layers").lightSortable({children:".list-layer",placeholder:"list-layer-placeholder",sortEnd:function(b){if(b.startPosition!==b.endPosition){var d=a.layers[b.startPosition];a.layers.splice(b.startPosition,1);a.layers.splice(b.endPosition,0,d);d=a.$editor.find(".viewport-layers");var e=d.children().length-
1;c(".list-layers").find(".list-layer").each(function(a,b){c(b).attr("data-position",a)});var m=d.find(".viewport-layer").eq(e-b.startPosition).detach();e-b.startPosition<e-b.endPosition?m.insertAfter(d.find(".viewport-layer").eq(e-1-b.endPosition)):m.insertBefore(d.find(".viewport-layer").eq(e-b.endPosition))}}});c(".list-layers").find(".list-layer").each(function(a,d){c(d).attr("data-position",a)});0!==this.layers.length&&this.layers[0].triggerSelect()},initViewport:function(){var a=this.$editor.find(".layer-viewport"),
b=c('<div class="slider-pro viewport-layers"></div>').appendTo(a),d=c(".sidebar-settings").find('.setting[name="width"]').val(),e=c(".sidebar-settings").find('.setting[name="height"]').val(),m=c(".sidebar-settings").find('.setting[name="custom_class"]').val(),f=this.currentSlide.getData("mainImage").main_image_source;d=isNaN(d)?c(window).width()*(parseInt(d,10)/100):parseInt(d,10);e=isNaN(e)?c(window).height()*(parseInt(e,10)/100):parseInt(e,10);a.css({width:d,height:e});b.css({width:d,height:e});
""!==m&&b.addClass(m);"undefined"!==typeof f&&""!==f&&-1===f.indexOf("[")&&(a=c(".sidebar-settings").find('.setting[name="image_scale_mode"]').val(),d=c(".sidebar-settings").find('.setting[name="center_image"]').is(":checked"),backgroundImage={"background-image":"url("+f+")","background-repeat":"no-repeat"},"cover"===a?backgroundImage["background-size"]="cover":"contain"===a?backgroundImage["background-size"]="contain":"exact"===a&&(backgroundImage["background-size"]="100% 100%"),!0===d&&(backgroundImage["background-position"]=
"center center"),b.css(backgroundImage))},createLayer:function(a){var b=this,d;"paragraph"===a.type?d=new r(a):"heading"===a.type?d=new t(a):"image"===a.type?d=new p(a):"div"===a.type?d=new u(a):"video"===a.type&&(d=new q(a));"new"===a.createMode||"duplicate"===a.createMode?this.layers.unshift(d):this.layers.push(d);d.on("select",function(a){c.each(b.layers,function(b,c){!0===c.isSelected()&&c.deselect();c.getID()===a.id&&c.select()})});d.triggerSelect();this.isWorking=!1;this.$editor.removeClass("no-layers")},
addNewLayer:function(a){var b=this;this.isWorking=!0;this.counter++;c.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_add_layer_settings",id:this.counter,type:a},complete:function(d){c(d.responseText).appendTo(c(".layers-settings"));c('<li class="list-layer" data-id="'+b.counter+'" data-position="'+b.layers.length+'">Layer '+b.counter+"</li>").prependTo(b.$editor.find(".list-layers"));b.createLayer({id:b.counter,type:a,createMode:"new"})}})},deleteLayer:function(){var a=
this,b;c.each(this.layers,function(c,e){if(!0===e.isSelected())return e.destroy(),a.layers.splice(c,1),b=c,!1});0===this.layers.length?this.$editor.addClass("no-layers"):0===b?this.layers[0].triggerSelect():this.layers[b-1].triggerSelect()},duplicateLayer:function(){var a=this,b;c.each(this.layers,function(a,c){!0===c.isSelected()&&(b=c.getData())});"undefined"!==typeof b&&(this.isWorking=!0,this.counter++,c.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_add_layer_settings",
id:this.counter,type:b.type,text:b.text,heading_type:b.heading_type,image_source:b.image_source,image_alt:b.image_alt,image_link:b.image_link,image_retina:b.image_retina,settings:JSON.stringify(b.settings)},complete:function(d){c(d.responseText).appendTo(c(".layers-settings"));c('<li class="list-layer" data-id="'+a.counter+'">Layer '+a.counter+"</li>").prependTo(a.$editor.find(".list-layers"));b.id=a.counter;b.createMode="duplicate";a.createLayer(b)}}))},save:function(){var a=[];c.each(this.layers,
function(b,c){a.push(c.getData())});this.currentSlide.setData("layers",a)},close:function(){this.$editor.find(".close-x").off("click");this.$editor.find(".add-layer-group").off("click");this.$editor.find(".delete-layer").off("click");this.$editor.find(".duplicate-layer").off("click");c(".list-layers").lightSortable("destroy");c.each(this.layers,function(a,b){b.destroy()});this.layers.length=0;c("body").find(".modal-overlay, .modal-window-container").remove()}},h=function(a){this.data=a;this.id=this.data.id;
this.selected=!1;this.events=c({});this.$editor=c(".layers-editor");this.$viewportLayers=this.$editor.find(".viewport-layers");this.$viewportLayer=null;this.$listLayer=this.$editor.find('.list-layer[data-id="'+this.id+'"]');this.$layerSettings=this.$editor.find('.layer-settings[data-id="'+this.id+'"]');this.init()};h.prototype={init:function(){this.initLayerContent();this.initLayerSettings();this.initViewportLayer();this.initLayerDragging();this.initListLayer()},getData:function(){var a={};a.id=this.id;
a.position=parseInt(this.$listLayer.attr("data-position"),10);a.name=this.$listLayer.text();a.settings={};this.$layerSettings.find(".setting").each(function(){var b=c(this),d=b.attr("type");"radio"===d?b.is(":checked")&&(a.settings[b.attr("name").split("-")[0]]=b.val()):"checkbox"===d?a.settings[b.attr("name")]=b.is(":checked"):b.is("select")&&"undefined"!==typeof b.attr("multiple")?a.settings[b.attr("name")]=null===b.val()?[]:b.val():a.settings[b.attr("name")]=b.val()});return a},getID:function(){return this.id},
select:function(){this.selected=!0;this.$listLayer.addClass("selected-list-layer");this.$layerSettings.addClass("selected-layer-settings")},deselect:function(){this.selected=!1;this.$listLayer.removeClass("selected-list-layer");this.$layerSettings.removeClass("selected-layer-settings")},triggerSelect:function(){this.trigger({type:"select",id:this.id})},isSelected:function(){return this.selected},destroy:function(){this.$viewportLayer.off("mousedown");this.$viewportLayer.off("mouseup");this.$viewportLayer.off("click");
this.$listLayer.off("click");this.$listLayer.off("dblclick");this.$listLayer.off("selectstart");this.$editor.off("mousemove.layer"+this.id);this.$editor.off("click.layer"+this.id);this.$layerSettings.find('select[name="preset_styles"]').multiCheck("destroy");this.$layerSettings.find('.setting[name="width"]').off("change");this.$layerSettings.find('.setting[name="height"]').off("change");this.$layerSettings.find('.setting[name="position"]').off("change");this.$layerSettings.find('.setting[name="horizontal"]').off("change");
this.$layerSettings.find('.setting[name="vertical"]').off("change");this.$layerSettings.find('.setting[name="preset_styles"]').off("change");this.$layerSettings.find('.setting[name="custom_class"]').off("change");this.$viewportLayer.remove();this.$listLayer.remove();this.$layerSettings.remove()},on:function(a,b){this.events.on(a,b)},off:function(a){this.events.off(a)},trigger:function(a){this.events.triggerHandler(a)},initViewportLayer:function(){var a=this;this.$viewportLayer.attr("data-id",this.id);
"new"===this.data.createMode||"duplicate"===this.data.createMode?this.$viewportLayer.appendTo(this.$viewportLayers):"init"===this.data.createMode&&this.$viewportLayer.prependTo(this.$viewportLayers);if("new"===this.data.createMode)this.$viewportLayer.css({width:"auto",height:"auto",left:0,top:0}),this.$viewportLayer.hasClass("sp-layer")?this.$viewportLayer.addClass("sp-black sp-padding"):this.$viewportLayer.find(".sp-layer").addClass("sp-black sp-padding");else if("init"===this.data.createMode||"duplicate"===
this.data.createMode){var b=null!==this.data.settings.preset_styles?this.data.settings.preset_styles.join(" "):"";b+=" "+this.data.settings.custom_class;this.$viewportLayer.hasClass("sp-layer")?this.$viewportLayer.addClass(b):this.$viewportLayer.find(".sp-layer").addClass(b);this.$viewportLayer.css({width:this.data.settings.width,height:this.data.settings.height});var c=this.data.settings.position.toLowerCase(),e=this.data.settings.horizontal,f=this.data.settings.vertical,g=parseInt(a.$viewportLayer.css("width"),
10),l=parseInt(a.$viewportLayer.css("height"),10);b=-1!==c.indexOf("right")?"right":-1!==c.indexOf("left")?"left":"center";c=-1!==c.indexOf("bottom")?"bottom":-1!==c.indexOf("top")?"top":"center";var h=-1===e.indexOf("px")&&-1===e.indexOf("%")?"px":"";"center"===b?this.$viewportLayer.css({width:g,marginLeft:"auto",marginRight:"auto",left:e+h,right:0}):this.$viewportLayer.css(b,e+h);h=-1===f.indexOf("px")&&-1===f.indexOf("%")?"px":"";"center"===c?this.$viewportLayer.css({height:l,marginTop:"auto",
marginBottom:"auto",top:f+h,bottom:0}):this.$viewportLayer.css(c,f+h)}this.$viewportLayer.on("mousedown",function(){a.triggerSelect()});this.$viewportLayer.on("click","a",function(){event.preventDefault()})},initLayerDragging:function(){var a=this,b=0,c=0,e=0,f=0,g=!1,l=!1,h=!1;this.$viewportLayer.on("mousedown",function(d){d.preventDefault();b=d.pageX;c=d.pageY;e=a.$viewportLayer[0].offsetLeft;f=a.$viewportLayer[0].offsetTop;g=!0;h=!1});this.$editor.find(".viewport-layers").on("mousemove.layer"+
this.id,function(d){d.preventDefault();h=!0;!0===g&&(a.$viewportLayer.css({left:e+d.pageX-b,top:f+d.pageY-c}),!1===l&&(l=!0,a.$viewportLayer.css({right:"auto",bottom:"auto"})))});this.$viewportLayer.on("mouseup",function(b){b.preventDefault();l=g=!1;if(!1!==h){var c=a.$layerSettings.find('.setting[name="position"]').val().toLowerCase(),d=parseInt(a.$viewportLayer.css("left"),10);b=parseInt(a.$viewportLayer.css("top"),10);var e=parseInt(a.$viewportLayer.css("width"),10),f=parseInt(a.$viewportLayer.css("height"),
10),m=a.$editor.find(".viewport-layers").width(),n=a.$editor.find(".viewport-layers").height();var k=-1!==c.indexOf("right")?"right":-1!==c.indexOf("left")?"left":"center";c=-1!==c.indexOf("bottom")?"bottom":-1!==c.indexOf("top")?"top":"center";"left"===k?a.$layerSettings.find('.setting[name="horizontal"]').val(d):"right"===k?(k=m-d-e,a.$layerSettings.find('.setting[name="horizontal"]').val(k),a.$viewportLayer.css({left:"auto",right:k})):(k=-(m-2*d-e),a.$layerSettings.find('.setting[name="horizontal"]').val(k),
a.$viewportLayer.css({left:k,right:0}));"top"===c?a.$layerSettings.find('.setting[name="vertical"]').val(b):"bottom"===c?(b=n-b-f,a.$layerSettings.find('.setting[name="vertical"]').val(b),a.$viewportLayer.css({top:"auto",bottom:b})):(b=-(n-2*b-f),a.$layerSettings.find('.setting[name="vertical"]').val(b),a.$viewportLayer.css({top:b,bottom:0}))}})},initListLayer:function(){var a=this,b=!1;this.$listLayer.on("click",function(b){a.trigger({type:"select",id:a.id})});this.$listLayer.on("dblclick",function(d){if(!0!==
b){b=!0;d=a.$listLayer.text();var e=c('<input type="text" value="'+d+'" />').appendTo(a.$listLayer);e.on("change",function(){b=!1;var c=""!==e.val()?e.val():"Layer "+a.id;a.$listLayer.text(c);e.remove()})}});this.$listLayer.on("selectstart",function(a){a.preventDefault()});this.$editor.on("click.layer"+this.id,function(d){if(!c(d.target).is("input")&&!0===b){b=!1;d=a.$listLayer.find("input");var e=""!==d.val()?d.val():"Layer "+a.id;a.$listLayer.text(e);d.remove()}})},initLayerContent:function(){},
initLayerSettings:function(){var a=this;this.$layerSettings.find('select[name="preset_styles"]').multiCheck({width:120});this.$layerSettings.find('.setting[name="position"], .setting[name="horizontal"], .setting[name="vertical"], .setting[name="width"], .setting[name="height"]').on("change",function(){var b=a.$layerSettings.find('.setting[name="position"]').val().toLowerCase(),c=a.$layerSettings.find('.setting[name="horizontal"]').val(),e=a.$layerSettings.find('.setting[name="vertical"]').val(),f=
a.$layerSettings.find('.setting[name="width"]').val(),g=a.$layerSettings.find('.setting[name="height"]').val(),l=parseInt(a.$viewportLayer.css("width"),10),h=parseInt(a.$viewportLayer.css("height"),10);var k=-1!==b.indexOf("right")?"right":-1!==b.indexOf("left")?"left":"center";b=-1!==b.indexOf("bottom")?"bottom":-1!==b.indexOf("top")?"top":"center";a.$viewportLayer.css({width:f,height:g,top:"auto",bottom:"auto",left:"auto",right:"auto"});f=-1===c.indexOf("px")&&-1===c.indexOf("%")?"px":"";"center"===
k?a.$viewportLayer.css({width:l,marginLeft:"auto",marginRight:"auto",left:c+f,right:0}):a.$viewportLayer.css(k,c+f);f=-1===e.indexOf("px")&&-1===e.indexOf("%")?"px":"";"center"===b?a.$viewportLayer.css({height:h,marginTop:"auto",marginBottom:"auto",top:e+f,bottom:0}):a.$viewportLayer.css(b,e+f)});this.$layerSettings.find('.setting[name="preset_styles"], .setting[name="custom_class"]').on("change",function(){var b="",c=a.$layerSettings.find('.setting[name="preset_styles"]').val(),e=a.$layerSettings.find('.setting[name="custom_class"]').val();
b+=null!==c?" "+c.join(" "):"";b+=""!==e?" "+e:"";a.$viewportLayer.hasClass("sp-layer")?a.$viewportLayer.attr("class","viewport-layer sp-layer"+b):a.$viewportLayer.find(".sp-layer").attr("class","sp-layer"+b)})}};var r=function(a){h.call(this,a)};r.prototype=Object.create(h.prototype);r.prototype.constructor=r;r.prototype.initLayerContent=function(){var a=this;this.text="new"===this.data.createMode?this.$layerSettings.find('textarea[name="text"]').val():this.data.text;this.$layerSettings.find('textarea[name="text"]').on("input",
function(){a.text=c(this).val();a.$viewportLayer.html(a.text)})};r.prototype.initViewportLayer=function(){this.$viewportLayer=c('<p class="viewport-layer sp-layer">'+this.text+"</p>");h.prototype.initViewportLayer.call(this)};r.prototype.getData=function(){var a=h.prototype.getData.call(this);a.type="paragraph";a.text=this.text;return a};r.prototype.destroy=function(){this.$layerSettings.find('textarea[name="text"]').off("input");h.prototype.destroy.call(this)};var t=function(a){h.call(this,a)};t.prototype=
Object.create(h.prototype);t.prototype.constructor=t;t.prototype.initLayerContent=function(){var a=this;this.headingType="new"===this.data.createMode?"h3":this.data.heading_type;this.headingText="new"===this.data.createMode?this.$layerSettings.find('textarea[name="text"]').val():this.data.text;this.$layerSettings.find('select[name="heading_type"]').on("change",function(){a.headingType=c(this).val();var b=a.$viewportLayer.find(".sp-layer").attr("class");a.$viewportLayer.html("<"+a.headingType+' class="'+
b+'">'+a.headingText+"</"+a.headingType+">")});this.$layerSettings.find('textarea[name="text"]').on("input",function(){a.headingText=c(this).val();a.$viewportLayer.find(".sp-layer").html(a.headingText)})};t.prototype.initViewportLayer=function(){this.$viewportLayer=c('<div class="viewport-layer"><'+this.headingType+' class="sp-layer">'+this.headingText+"</"+this.headingType+"></div>");h.prototype.initViewportLayer.call(this)};t.prototype.getData=function(){var a=h.prototype.getData.call(this);a.type=
"heading";a.heading_type=this.headingType;a.text=this.headingText;return a};t.prototype.destroy=function(){this.$layerSettings.find('select[name="heading_type"]').off("change");this.$layerSettings.find('textarea[name="text"]').off("input");h.prototype.destroy.call(this)};var p=function(a){h.call(this,a)};p.prototype=Object.create(h.prototype);p.prototype.constructor=p;p.prototype.initLayerContent=function(){var a=this,b=sp_js_vars.plugin+"/admin/assets/css/images/image-placeholder.png";this.imageSource=
"new"===this.data.createMode?b:this.data.image_source;this.hasPlaceholder="new"===this.data.createMode?!0:!1;this.$layerSettings.find('input[name="image_source"]').on("change",function(){a.imageSource=c(this).val();""!==a.imageSource?(a.$viewportLayer.attr("src",a.imageSource).removeClass("has-placeholder"),a.hasPlaceholder=!1):(a.$viewportLayer.attr("src",b).addClass("has-placeholder"),a.hasPlaceholder=!0)});this.$layerSettings.find(".layer-image-loader").on("click",function(b){var d="image_source"===
c(b.target).siblings("input").attr("name")?"default":"retina";v.open(function(b){b=b[0];"default"===d?(a.$layerSettings.find('input[name="image_source"]').val(b.url).trigger("change"),a.$layerSettings.find('input[name="image_alt"]').val(b.alt)):"retina"===d&&a.$layerSettings.find('input[name="image_retina"]').val(b.url)})})};p.prototype.initLayerSettings=function(){h.prototype.initLayerSettings.call(this);var a=this;this.$layerSettings.find('.setting[name="preset_styles"], .setting[name="custom_class"]').on("change",
function(){!0===a.hasPlaceholder?a.$viewportLayer.addClass("has-placeholder"):a.$viewportLayer.removeClass("has-placeholder")})};p.prototype.initViewportLayer=function(){this.$viewportLayer=c('<img class="viewport-layer sp-layer" src="'+this.imageSource+'" />');!0===this.hasPlaceholder?this.$viewportLayer.addClass("has-placeholder"):this.$viewportLayer.removeClass("has-placeholder");h.prototype.initViewportLayer.call(this)};p.prototype.getData=function(){var a=h.prototype.getData.call(this);a.type=
"image";a.image_source=this.imageSource;a.image_alt=this.$layerSettings.find('input[name="image_alt"]').val();a.image_link=this.$layerSettings.find('input[name="image_link"]').val();a.image_retina=this.$layerSettings.find('input[name="image_retina"]').val();return a};p.prototype.destroy=function(){this.$layerSettings.find('input[name="image_source"]').off("change");this.$layerSettings.find(".layer-image-loader").off("click");h.prototype.destroy.call(this)};var u=function(a){h.call(this,a)};u.prototype=
Object.create(h.prototype);u.prototype.constructor=u;u.prototype.initLayerContent=function(){var a=this;this.text="new"===this.data.createMode?this.$layerSettings.find('textarea[name="text"]').val():this.data.text;this.$layerSettings.find('textarea[name="text"]').on("input",function(){a.text=c(this).val();a.$viewportLayer.html(a.text)})};u.prototype.initViewportLayer=function(){this.$viewportLayer=c('<div class="viewport-layer sp-layer">'+this.text+"</div>");h.prototype.initViewportLayer.call(this)};
u.prototype.getData=function(){var a=h.prototype.getData.call(this);a.type="div";a.text=this.text;return a};u.prototype.destroy=function(){this.$layerSettings.find('textarea[name="text"]').off("input");h.prototype.destroy.call(this)};var q=function(a){h.call(this,a)};q.prototype=Object.create(h.prototype);q.prototype.constructor=q;q.prototype.initLayerContent=function(){var a=this;this.$layerSettings.find(".layer-image-loader").on("click",function(b){var d="video_poster"===c(b.target).siblings("input").attr("name")?
"default":"retina";v.open(function(b){b=b[0];"default"===d?a.$layerSettings.find('input[name="video_poster"]').val(b.url).trigger("change"):"retina"===d&&a.$layerSettings.find('input[name="video_retina_poster"]').val(b.url)})})};q.prototype.initViewportLayer=function(){var a=this;this.$viewportLayer=c('<div class="viewport-layer sp-layer has-placeholder"><span class="video-placeholder"></span></div>');h.prototype.initViewportLayer.call(this);this.$layerSettings.find('input[name="width"], input[name="height"]').on("change",
function(){var b=a.$layerSettings.find('input[name="width"]').val(),c=a.$layerSettings.find('input[name="height"]').val();"auto"===b&&a.$viewportLayer.css("width",300);"auto"===c&&a.$viewportLayer.css("height",150)});this.$layerSettings.find('input[name="width"], input[name="height"]').trigger("change")};q.prototype.initLayerSettings=function(){h.prototype.initLayerSettings.call(this);var a=this;this.$layerSettings.find('.setting[name="preset_styles"], .setting[name="custom_class"]').on("change",
function(){a.$viewportLayer.addClass("has-placeholder")})};q.prototype.getData=function(){var a=h.prototype.getData.call(this);a.type="video";a.video_source=this.$layerSettings.find('select[name="video_source"]').val();a.video_id=this.$layerSettings.find('input[name="video_id"]').val();a.video_poster=this.$layerSettings.find('input[name="video_poster"]').val();a.video_retina_poster=this.$layerSettings.find('input[name="video_retina_poster"]').val();a.video_load_mode=this.$layerSettings.find('select[name="video_load_mode"]').val();
a.video_params=this.$layerSettings.find('input[name="video_params"]').val();return a};q.prototype.destroy=function(){this.$layerSettings.find('input[name="width"]').off("change");this.$layerSettings.find('input[name="height"]').off("change");h.prototype.destroy.call(this)};var w={editor:null,currentSlide:null,needsPreviewUpdate:!1,open:function(a){this.currentSlide=k.getSlide(a);var b=this,d=this.currentSlide.getData("settings"),e=c('.slide[data-id="'+a+'"]').find(".slide-spinner").css({display:"inline-block",
visibility:"visible"});c.ajax({url:sp_js_vars.ajaxurl,type:"post",dataType:"html",data:{action:"sliderpro_load_settings_editor",data:JSON.stringify(d)},complete:function(a){c("body").append(a.responseText);b.init();e.css({display:"",visibility:""})}})},init:function(){var a=this;c(".modal-window-container").css("top",c(window).scrollTop());this.$editor=c(".settings-editor");this.$editor.find(".close, .close-x").on("click",function(b){b.preventDefault();a.save();a.close()});this.$editor.find('.slide-setting[name="content_type"]').on("change",
function(){var b=c(this).val();a.loadControls(b);a.needsPreviewUpdate=!0});"posts"===this.$editor.find('.slide-setting[name="content_type"]').val()&&this.handlePostsSelects()},loadControls:function(a){var b=this,d=this.currentSlide.getData("settings");this.$editor.find(".content-type-settings").empty();c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_load_content_type_settings",type:a,data:JSON.stringify(d)},complete:function(d){c(".content-type-settings").append(d.responseText);
"posts"===a&&b.handlePostsSelects()}})},handlePostsSelects:function(){var a=this.$editor.find('select[name="posts_post_types"]'),b=this.$editor.find('select[name="posts_taxonomies"]'),d=b.val()||[];a.on("change",function(){var a=c(this).val();b.empty();null!==a?k.getTaxonomies(a,function(e){c.each(a,function(a,f){c.each(e[f],function(a,e){var f=c('<optgroup label="'+e.label+'"></optgroup>').appendTo(b);c.each(e.terms,function(a,b){var e=-1!==c.inArray(b.full,d)?' selected="selected"':"";c('<option value="'+
b.full+'"'+e+">"+b.name+"</option>").appendTo(f)})})});b.multiCheck("refresh")}):b.multiCheck("refresh")});b.on("change",function(a){b.find("option").each(function(){var a=c(this),b=a.attr("value"),e=c.inArray(b,d);!0===a.is(":selected")&&-1===e?d.push(b):!1===a.is(":selected")&&-1!==e&&d.splice(e,1)})});a.multiCheck({width:215});b.multiCheck({width:215})},save:function(){var a={};this.$editor.find(".slide-setting").each(function(){var b=c(this);"undefined"!==typeof b.attr("multiple")?a[b.attr("name")]=
null!==b.val()?b.val():[]:"checkbox"===b.attr("type")?a[b.attr("name")]=b.is(":checked"):a[b.attr("name")]=b.val()});this.currentSlide.setData("settings",a);!0===this.needsPreviewUpdate&&(this.currentSlide.updateSlidePreview(),this.needsPreviewUpdate=!1)},close:function(){this.$editor.find(".close-x").off("click");this.$editor.find('select[name="posts_post_types"]').multiCheck("destroy");this.$editor.find('select[name="posts_taxonomies"]').multiCheck("destroy");this.$editor.find('select[name="content_type"]').off("change");
this.$editor.find('select[name="posts_post_types"]').off("change");this.$editor.find('select[name="posts_taxonomies"]').off("change");c("body").find(".modal-overlay, .modal-window-container").remove()}},v={open:function(a){var b=[],c=wp.media.editor.insert;wp.media.editor.send.attachment=function(a,c){var d="undefined"!==typeof c.sizes[a.size]?c.sizes[a.size]:c.sizes.full;b.push({id:c.id,url:d.url,alt:c.alt,title:c.title,width:d.width,height:d.height})};wp.media.editor.insert=function(d){a.call(this,
b);wp.media.editor.insert=c};wp.media.editor.open("media-loader")}},x={previewWindow:null,slider:null,sliderData:null,open:function(a){var b=this,d=c(".preview-spinner").css({display:"inline-block",visibility:"visible"});c("body").append('<div class="modal-overlay"></div><div class="modal-window-container preview-window">\t<div class="modal-window">\t\t<span class="close-x"></span>\t</div></div>');this.sliderData=a;this.init();c.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_preview_slider",
data:JSON.stringify(a)},complete:function(a){b.previewWindow.append(a.responseText);b.slider=b.previewWindow.find(".slider-pro");b.previewWindow.css("visibility","");d.css({display:"",visibility:""})}})},init:function(){var a=this;c(".modal-window-container").css("top",c(window).scrollTop());this.previewWindow=c(".preview-window .modal-window");this.previewWindow.find(".close-x").on("click",function(b){a.close()});this.previewWindow.css("visibility","hidden");var b=this.sliderData.settings.width,
d=this.sliderData.settings.height,e=this.sliderData.settings.visible_size,f=this.sliderData.settings.force_size,g=this.sliderData.settings.orientation,l=this.sliderData.settings.auto_thumbnail_images,h="top"===this.sliderData.settings.thumbnails_position||"bottom"===this.sliderData.settings.thumbnails_position?"horizontal":"vertical";c.each(this.sliderData.slides,function(a,b){if("undefined"!==typeof b.thumbnail_source&&""!==b.thumbnail_source||"undefined"!==typeof b.thumbnail_content&&""!==b.thumbnail_content)l=
!0});"auto"!==e&&("horizontal"===g?b=e:"vertical"===g&&(d=e));"fullWidth"===f?b="100%":"fullWindow"===f&&(d=b="100%");var k=-1!==b.indexOf("%"),p=-1!==d.indexOf("%");!1===k&&!0===l&&"vertical"===h&&(b=parseInt(b,10)+parseInt(this.sliderData.settings.thumbnail_width,10));c(window).on("resize.sliderPro",function(){!0===k?a.previewWindow.css("width",c(window).width()*(parseInt(b,10)/100)-100):b>=c(window).width()-100?a.previewWindow.css("width",c(window).width()-100):a.previewWindow.css("width",b);!0===
p&&a.previewWindow.css("height",c(window).height()*(parseInt(d,10)/100))});c(window).trigger("resize")},close:function(){this.previewWindow.find(".close-x").off("click");c(window).off("resize.sliderPro");this.slider.sliderPro("destroy");c("body").find(".modal-overlay, .modal-window-container").remove()}};c(document).ready(function(){k.init()})})(jQuery);
(function(c){var k=function(f,g){this.options=g;this.isOpened=!1;this.$select=c(f);this.$multiCheckContent=this.$multiCheckHeader=this.$multiCheck=null;this.uid=(new Date).valueOf()*Math.random();this.counter=0;this.init()};k.prototype={init:function(){var f=this;this.settings=c.extend({},this.defaults,this.options);this.$multiCheck=c('<div class="multi-check"></div>').css("width",this.settings.width);this.$multiCheckHeader=c('<button type="button" class="multi-check-header"><span class="multi-check-header-text"></span><span class="multi-check-header-arrow">\u25bc</span></button>').appendTo(this.$multiCheck);
this.$multiCheckContent=c('<ul class="multi-check-content"></ul>').appendTo(this.$multiCheck);this.$multiCheckHeader.on("mousedown.multiCheck",function(c){!1===f.isOpened?f.open():!0===f.isOpened&&f.close()});c(document).on("mousedown.multiCheck."+this.uid,function(g){!1===c.contains(f.$multiCheck[0],g.target)&&f.close()});this.refresh();this.$select.after(this.$multiCheck);this.$select.hide();this.$multiCheckContent.hide()},refresh:function(){var f=this;this.counter=0;this.$multiCheckContent.find(".single-check").off("change.multiCheck");
this.$multiCheckContent.empty();this.$select.children().each(function(){c(this).is("optgroup")?(c('<li class="group-label">'+c(this).attr("label")+"</li>").appendTo(f.$multiCheckContent),c(this).children().each(function(){f._optionToCheckbox(c(this))})):f._optionToCheckbox(c(this))});this.$multiCheckContent.find(".single-check").on("change.multiCheck",function(){c(this).is(":checked")?c(this).data("option").attr("selected","selected"):c(this).data("option").removeAttr("selected");f.$select.trigger("change");
f._updateHeader()});this._updateHeader()},_optionToCheckbox:function(f){var g=c('<li class="single-check-container"></li>').appendTo(this.$multiCheckContent),l=c('<input id="single-check-'+this.uid+"-"+this.counter+'" class="single-check" type="checkbox" value="'+f.attr("value")+'"'+(f.is(":selected")?' checked="checked"':"")+" />").appendTo(g);c('<label for="single-check-'+this.uid+"-"+this.counter+'">'+f.text()+"</label>").appendTo(g);l.data("option",f);this.counter++},_updateHeader:function(){var f=
this.$multiCheckHeader.find(".multi-check-header-text"),g="",l=0;this.$multiCheckContent.find(".single-check").each(function(){c(this).is(":checked")&&(""!==g&&(g+=", "),g+=c(this).siblings("label").text(),l++)});0===l?g="Click to select":2<=l&&(g=l+" selected");f.text(g)},open:function(){this.isOpened=!0;this.$multiCheckContent.show()},close:function(){this.isOpened=!1;this.$multiCheckContent.hide()},destroy:function(){this.$select.removeData("multiCheck");this.$multiCheckHeader.off("mousedown.multiCheck");
c(document).off("mousedown.multiCheck."+this.uid);this.$multiCheckContent.find(".single-check").off("change.multiCheck");this.$multiCheck.remove();this.$select.show()},defaults:{width:200}};c.fn.multiCheck=function(f){var g=Array.prototype.slice.call(arguments,1);return this.each(function(){if("undefined"===typeof c(this).data("multiCheck")){var l=new k(this,f);c(this).data("multiCheck",l)}else"undefined"!==typeof f&&(l=c(this).data("multiCheck"),"function"===typeof l[f]?l[f].apply(l,g):c.error(f+
" does not exist in multiCheck."))})}})(jQuery);
(function(c){var k=function(f,g){this.options=g;this.$container=c(f);this.$placeholder=this.$selectedChild=null;this.initialMouseY=this.initialMouseX=this.slideInitialY=this.slideInitialX=this.currentMouseY=this.currentMouseX=0;this.isDragging=!1;this.checkHover=0;this.uid=(new Date).valueOf();this.events=c({});this.endPosition=this.startPosition=0;this.init()};k.prototype={init:function(){this.settings=c.extend({},this.defaults,this.options);this.$container.on("mousedown.lightSortable"+this.uid,
c.proxy(this._onDragStart,this));c(document).on("mousemove.lightSortable."+this.uid,c.proxy(this._onDragging,this));c(document).on("mouseup.lightSortable."+this.uid,c.proxy(this._onDragEnd,this))},_onDragStart:function(f){1!==f.which||c(f.target).is("select")||c(f.target).is("input")||c(f.target).is("a")||(this.$selectedChild=c(f.target).is(this.settings.children)?c(f.target):c(f.target).parents(this.settings.children),1===this.$selectedChild.length&&(this.initialMouseX=f.pageX,this.initialMouseY=
f.pageY,this.slideInitialX=this.$selectedChild.position().left,this.slideInitialY=this.$selectedChild.position().top,this.startPosition=this.$selectedChild.index(),f.preventDefault()))},_onDragging:function(f){if(null!==this.$selectedChild&&0!==this.$selectedChild.length){f.preventDefault();this.currentMouseX=f.pageX;this.currentMouseY=f.pageY;if(!this.isDragging){this.isDragging=!0;this.trigger({type:"sortStart"});c.isFunction(this.settings.sortStart)&&this.settings.sortStart.call(this,{type:"sortStart"});
f=this.$container.is("ul")||this.$container.is("ol")?"li":"div";this.$placeholder=c("<"+f+">").addClass("ls-ignore "+this.settings.placeholder).insertAfter(this.$selectedChild);0===this.$placeholder.width()&&this.$placeholder.css("width",this.$selectedChild.outerWidth());0===this.$placeholder.height()&&this.$placeholder.css("height",this.$selectedChild.outerHeight());this.$selectedChild.css({"pointer-events":"none",position:"absolute",left:this.$selectedChild.position().left,top:this.$selectedChild.position().top,
width:this.$selectedChild.width(),height:this.$selectedChild.height()}).addClass("ls-ignore");this.$container.append(this.$selectedChild);c("body").css("user-select","none");var g=this;this.checkHover=setInterval(function(){g.$container.find(g.settings.children).not(".ls-ignore").each(function(){var f=c(this);g.currentMouseX>f.offset().left&&g.currentMouseX<f.offset().left+f.width()&&g.currentMouseY>f.offset().top&&g.currentMouseY<f.offset().top+f.height()&&(f.index()>=g.$placeholder.index()?g.$placeholder.insertAfter(f):
g.$placeholder.insertBefore(f))})},200)}this.$selectedChild.css({left:this.currentMouseX-this.initialMouseX+this.slideInitialX,top:this.currentMouseY-this.initialMouseY+this.slideInitialY})}},_onDragEnd:function(){this.isDragging&&(this.isDragging=!1,c("body").css("user-select",""),this.$selectedChild.css({position:"",left:"",top:"",width:"",height:"","pointer-events":""}).removeClass("ls-ignore").insertAfter(this.$placeholder),this.$placeholder.remove(),clearInterval(this.checkHover),this.endPosition=
this.$selectedChild.index(),this.trigger({type:"sortEnd"}),c.isFunction(this.settings.sortEnd)&&this.settings.sortEnd.call(this,{type:"sortEnd",startPosition:this.startPosition,endPosition:this.endPosition}));this.$selectedChild=null},destroy:function(){this.$container.removeData("lightSortable");this.isDragging&&this._onDragEnd();this.$container.off("mousedown.lightSortable."+this.uid);c(document).off("mousemove.lightSortable."+this.uid);c(document).off("mouseup.lightSortable."+this.uid)},on:function(c,
g){return this.events.on(c,g)},off:function(c){return this.events.off(c)},trigger:function(c){return this.events.triggerHandler(c)},defaults:{placeholder:"",sortStart:function(){},sortEnd:function(){}}};c.fn.lightSortable=function(f){var g=Array.prototype.slice.call(arguments,1);return this.each(function(){if("undefined"===typeof c(this).data("lightSortable")){var l=new k(this,f);c(this).data("lightSortable",l)}else"undefined"!==typeof f&&(l=c(this).data("lightSortable"),"function"===typeof l[f]?
l[f].apply(l,g):c.error(f+" does not exist in lightSortable."))})}})(jQuery);(function(c){c.lightURLParse=function(k){k=k.split("?")[1].split("&");var f=[];c.each(k,function(c,k){var g=k.split("=");f[g[0]]=g[1]});return f}})(jQuery);